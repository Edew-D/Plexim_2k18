Plecs {
  Name          "PLECSRTBoxLib"
  Version       "4.1"
  CircuitModel  "DiscStateSpace"
  StartTime     "0.0"
  StopTime      "1.0"
  Timeout       ""
  Solver        "FixedStepDiscrete"
  MaxStep       "1e-3"
  InitStep      "-1"
  FixedStep     "-1"
  Refine        "1"
  ZCStepSize    "1e-9"
  RelTol        "1e-3"
  AbsTol        "-1"
  TurnOnThreshold "0"
  SyncFixedStepTasks "2"
  UseSingleCommonBaseRate "2"
  LossVariableLimitExceededMsg "3"
  NegativeSwitchLossMsg "3"
  DivisionByZeroMsg "3"
  StiffnessDetectionMsg "2"
  MaxConsecutiveZCs "1000"
  AlgebraicLoopWithStateMachineMsg "2"
  AssertionAction "1"
  InitializationCommands ""
  InitialState  "1"
  SystemState   ""
  CodeGenParameterInlining "2"
  CodeGenInliningExceptions "AAAACwAAAAAA"
  CodeGenFloatingPointFormat "1"
  CodeGenIntegerWordSize "32"
  CodeGenAbsTimeUsageMsg "3"
  CodeGenBaseName ""
  CodeGenOutputDir ""
  CodeGenExtraOpts ""
  CodeGenTarget "Generic"
  CodeGenTargetSettings ""
  ExtendedMatrixPrecision "1"
  MatrixSignificanceCheck "2"
  EnableStateSpaceSplitting "2"
  DisplayStateSpaceSplitting "1"
  DiscretizationMethod "2"
  ExternalModeSettings "AAAAfwAAAAAWUU1hcDxRU3RyaW5nLFFTdHJpbmc+AAAAAAYAAAAYAF"
"QAcgBpAGcAZwBlAHIAVgBhAGwAdQBlAAAAAgAwAAAAGABUAHIAaQBnAGcAZQByAEQAZQBsAGEAeQA"
"AAAIAMAAAABYAUwBlAG4AcwBpAHQAaQB2AGkAdAB5AAAAAgAwAAAAFgBSAGUAZgByAGUAcwBoAFIA"
"YQB0AGUAAAAEADIAMAAAABQATgB1AG0AUwBhAG0AcABsAGUAcwAAAAgAOAAxADkAMgAAABQARABlA"
"GMAaQBtAGEAdABpAG8AbgAAAAIAMQ=="
  AlgebraicLoopMethod "1"
  AlgebraicLoopTolerance "1e-6"
  Terminal {
    Type          Input
    Index         "1"
  }
  Terminal {
    Type          Output
    Index         "1"
  }
  Terminal {
    Type          Input
    Index         "2"
  }
  Terminal {
    Type          Output
    Index         "2"
  }
  Terminal {
    Type          Input
    Index         "3"
  }
  Terminal {
    Type          Output
    Index         "3"
  }
  Terminal {
    Type          Input
    Index         "4"
  }
  Terminal {
    Type          Output
    Index         "4"
  }
  Terminal {
    Type          Output
    Index         "5"
  }
  Terminal {
    Type          Output
    Index         "6"
  }
  Terminal {
    Type          Input
    Index         "5"
  }
  Terminal {
    Type          Output
    Index         "7"
  }
  Terminal {
    Type          Input
    Index         "6"
  }
  Terminal {
    Type          Input
    Index         "7"
  }
  Terminal {
    Type          Input
    Index         "8"
  }
  Terminal {
    Type          Output
    Index         "8"
  }
  Terminal {
    Type          Output
    Index         "9"
  }
  Terminal {
    Type          Output
    Index         "10"
  }
  Terminal {
    Type          Input
    Index         "9"
  }
  Terminal {
    Type          Input
    Index         "10"
  }
  Schematic {
    Location      [117, 433; 635, 952]
    ZoomFactor    1
    SliderPosition [0, 0]
    ShowBrowser   off
    BrowserWidth  100
    Component {
      Type          TargetCode
      Name          "Analog In1"
      Show          on
      Position      [80, 60]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "1"
      CodeFcn       "Include(\"AnalogIn.h\");\n\nfor (int i = 0; i < NumOutput"
"Signals(0); ++i)\n{\n   int channel = MaskRealData(MASK_VAR_channel, i);\n   "
"double scale = MaskRealData(MASK_VAR_scale, i);\n   double offset = MaskRealD"
"ata(MASK_VAR_offset, i);\n   \n   Require(\"Analog input\", channel);\n   Pri"
"nt(InitCode, \"setupAnalogIn(%i, %.9ef, %.9ef);\\n\", channel, scale, offset)"
";\n   Print(OutputSignal(0, i), \"getAnalogIn(%i)\", channel);\n}\n"
      MaskType      "Analog In"
      MaskDescription "Output the measured voltage at an analog input channel."
"\n\nThe output signal is calculated as input*Scale+Offset, where input is the"
" input voltage in Volts."
      MaskHelp      "ai_rtbox.html"
      MaskDisplay   "text(['Analog' char(10) 'In'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Analog input chan"
"nel(s)\" must be a scalar or vector of positive or zero integers.')\nend\nif "
"~isreal(scale) || ~isvector(scale),\n  error('\"Scale\" must be a real scalar"
" or vector.')\nend\nif ~isreal(offset) || ~isvector(offset),\n  error('\"Offs"
"et\" must be a real scalar or vector.')\nend\n\nif numel(scale) == 1,\n  scal"
"e = repmat(scale, size(channel));\nelseif numel(scale) ~= numel(channel),\n  "
"error('\"Scale\" must be scalar or a vector of the same length as the number "
"of channels.');\nend\n\nif numel(offset) == 1,\n  offset = repmat(offset, siz"
"e(channel));\nelseif numel(offset) ~= numel(channel),\n  error('\"Offset\" mu"
"st be scalar or a vector of the same length as the number of channels.');\nen"
"d\n"
      Parameter {
        Variable      "channel"
        Prompt        "Analog input channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "scale"
        Prompt        "Scale"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "offset"
        Prompt        "Offset"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [164, 350; 1150, 494]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [280, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Gain
          Name          "Scale"
          Show          on
          Position      [170, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "K"
            Value         "scale"
            Show          off
          }
          Parameter {
            Variable      "Multiplication"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Offset
          Name          "Offset"
          Show          on
          Position      [225, 75]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Offset"
            Value         "offset"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Scale"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Scale"
          SrcTerminal   2
          DstComponent  "Offset"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Offset"
          SrcTerminal   2
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Analog Out1"
      Show          on
      Position      [260, 60]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "1"
      CodeFcn       "Include(\"AnalogOut.h\");\n\nfor (int i = 0; i < NumInput"
"Signals(0); ++i)\n{\n   int channel = MaskRealData(MASK_VAR_channel, i);\n\n "
"  Require(\"Analog output\", channel);\n   \n   double scale = MaskRealData(M"
"ASK_VAR_scale, i);\n   double offset = MaskRealData(MASK_VAR_offset, i);\n   "
"double min = MaskRealData(MASK_VAR_minOutput, i);\n   double max = MaskRealDa"
"ta(MASK_VAR_maxOutput, i);\n      \n   Print(InitCode, \"setupAnalogOut(%i, %"
".9ef, %.9ef, %.9e, %.9e);\\n\", channel, scale, offset, min, max);\n   Print("
"OutputCode, \"setAnalogOut(%i, %s);\\n\", channel, InputSignal(0, i));\n}\n"
      MaskType      "Analog Out"
      MaskDescription "Set an analog output.\n\nThe output voltage is calculat"
"ed as input*scale+offset. "
      MaskHelp      "ao_rtbox.html"
      MaskDisplay   "text(['Analog' char(10) 'Out'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Analog output cha"
"nnel(s)\" must be a scalar or vector of positive or zero integers.')\nend\nif"
" ~isreal(scale) || ~isvector(scale),\n  error('\"Scale\" must be a real scala"
"r or vector.')\nend\nif ~isreal(offset) || ~isvector(offset),\n  error('\"Off"
"set\" must be a real scalar or vector.')\nend\nif ~isreal(minOutput) || ~isve"
"ctor(minOutput),\n  error('\"Minimum output voltage\" must be a real scalar o"
"r vector.')\nend\nif ~isreal(maxOutput) || ~isvector(maxOutput),\n  error('\""
"Maximum output voltage\" must be a real scalar or vector.')\nend\n\nif numel("
"scale) == 1,\n  scale = repmat(scale, size(channel));\nelseif numel(scale) ~="
" numel(channel),\n  error('\"Scale\" must be scalar or a vector of the same l"
"ength as the number of channels.');\nend\n\nif numel(offset) == 1,\n  offset "
"= repmat(offset, size(channel));\nelseif numel(offset) ~= numel(channel),\n  "
"error('\"Offset\" must be scalar or a vector of the same length as the number"
" of channels.');\nend\n\nif numel(minOutput) == 1,\n  minOutput = repmat(minO"
"utput, size(channel));\nelseif numel(minOutput) ~= numel(channel),\n  error('"
"\"Minimum output voltage\" must be scalar or a vector of the same length as t"
"he number of channels.');\nend\nminOutput(isnan(minOutput)) = -inf;\n\nif num"
"el(maxOutput) == 1,\n  maxOutput = repmat(maxOutput, size(channel));\nelseif "
"numel(maxOutput) ~= numel(channel),\n  error('\"Maximum output voltage\" must"
" be scalar or a vector of the same length as the number of channels.');\nend"
"\nmaxOutput(isnan(maxOutput)) = inf;\n\nif any(minOutput > maxOutput),\n  err"
"or('\"Minimum output voltage\" must be less than or equal to \"Maximum output"
" voltage\".');\nend"
      Parameter {
        Variable      "channel"
        Prompt        "Analog output channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "scale"
        Prompt        "Scale"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "offset"
        Prompt        "Offset"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "minOutput"
        Prompt        "Minimum output voltage"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "maxOutput"
        Prompt        "Maximum output voltage"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [-1624, 388; -721, 532]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [330, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [115, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Gain
          Name          "Scale"
          Show          on
          Position      [160, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "K"
            Value         "scale"
            Show          off
          }
          Parameter {
            Variable      "Multiplication"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Offset
          Name          "Offset"
          Show          on
          Position      [215, 75]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Offset"
            Value         "offset"
            Show          off
          }
        }
        Component {
          Type          Saturation
          Name          "Saturation"
          Show          on
          Position      [275, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "UpperLimit"
            Value         "maxOutput"
            Show          off
          }
          Parameter {
            Variable      "LowerLimit"
            Value         "minOutput"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Scale"
          SrcTerminal   2
          DstComponent  "Offset"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "Scale"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Offset"
          SrcTerminal   2
          DstComponent  "Saturation"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Saturation"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Digital In1"
      Show          on
      Position      [80, 140]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "2"
      CodeFcn       "Include(\"DigitalIn.h\");\n\nfor (int i = 0; i < NumOutpu"
"tSignals(0); ++i)\n{\n   int channel = MaskRealData(MASK_VAR_channel, i);\n  "
" \n   Require(\"Digital input\", channel);\n   Print(OutputSignal(0, i), \"ge"
"tDigitalIn(%i)\", channel);\n}\n"
      MaskType      "Digital In"
      MaskDescription "Reads a digital input.\n\nThe output signal is 1 if the"
" input voltage is higher than 2 Volts and 0 if it is lower than 0.8 Volts. \n"
"For other input voltages the output signal is undefined."
      MaskHelp      "di_rtbox.html"
      MaskDisplay   "text(['Digital' char(10) 'In'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Digital input cha"
"nnel(s)\" must be a scalar or vector of positive or zero integers.')\nend\n"
      Parameter {
        Variable      "channel"
        Prompt        "Digital input channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [1104, 143; 1901, 286]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Digital Out1"
      Show          on
      Position      [260, 140]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "2"
      CodeFcn       "Include(\"DigitalOut.h\");\n\nfor (int i = 0; i < NumInpu"
"tSignals(0); ++i)\n{\n   int channel = MaskRealData(MASK_VAR_channel, i);\n  "
" Require(\"Digital output\", channel);\n   \n   Print(InitCode, \"setupDigita"
"lOut(%i, DO_GPIO, DO_NINV);\\n\", channel);\n   \n   Print(OutputCode, \"writ"
"eDigitalOut(%i, %s);\\n\", channel, InputSignal(0, i));\n}\n"
      MaskType      "Digital Out"
      MaskDescription "Set a digital output.\n\nThe output is set low if the i"
"nput signal is zero, it is set high for all other values."
      MaskHelp      "do_rtbox.html"
      MaskDisplay   "text(['Digital' char(10) 'Out'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Digital output ch"
"annel(s)\" must be a scalar or vector of positive or zero integers.')\nend\n"
      Parameter {
        Variable      "channel"
        Prompt        "Digital output channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [698, 224; 1749, 367]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "PWM Capture1"
      Show          on
      Position      [80, 220]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "3"
      CodeFcn       "Include(\"DigitalIn.h\");\n\ndouble sampleTime = TargetRe"
"alData(TARGET_VAR_SAMPLE_TIME, 0);\n\nif (sampleTime > 0.4915125e-3)\n{\n   S"
"etErrorStatus(\"PWM Capture blocks can only be used with a discretization ste"
"p time \"\n                  \"smaller than 0.49 ms.\");\n}\n\nfor (int i = 0"
"; i < NumOutputSignals(0); ++i)\n{\n   int channel = MaskRealData(MASK_VAR_ch"
"annel, i);\n   int polarity = MaskRealData(MASK_VAR_polarity, i);\n   \n\tPri"
"nt(InitCode, \"setupPWMCaptureChannel(%i,%i);\\n\", channel, polarity);   \n "
"  \n   Require(\"Digital input\", channel);\n   Print(OutputSignal(0, i), \"g"
"etDigitalInAveraged(%i)\", channel);\n}\n"
      MaskType      "PWM Capture"
      MaskDescription "Averages a digital input over one model step.\n\nThe ou"
"tput signal corresponds to the percentage of time during which a digital inpu"
"t signal was active over the last model step period."
      MaskHelp      "pwmcap_rtbox.html"
      MaskDisplay   "text(['PWM' char(10) 'Capture'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Digital input cha"
"nnel(s)\" must be a scalar or vector of positive or zero integers.')\nelseif "
"~isreal(polarity) || ~isvector(polarity) ...\n   || any(floor(polarity) ~= po"
"larity) || any(polarity < 0),\n  error('\"Channel(s) active polarity\" must b"
"e a scalar or vector of positive or zero integers.')\nelseif numel(polarity) "
"== 1,\n  polarity = repmat(polarity, size(channel));\nelseif numel(polarity) "
"~= numel(channel),\n  error('\"Channel(s) active polarity\" must be scalar or"
" a vector of the same length as the number of channels.');\nelse\n  polarity "
"= polarity > 0;% vector of 1 and 0\nend\n\n"
      Parameter {
        Variable      "channel"
        Prompt        "Digital input channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "polarity"
        Prompt        "Channel(s) active polarity"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "Ts"
        Prompt        "Averaging interval (offline only)"
        Type          FreeText
        Value         "1e-5"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [996, 459; 1882, 603]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [70, 45]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [345, 45]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Filters/Periodic Average"
          Name          "Periodic Average"
          Show          off
          Position      [235, 45]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "T_average"
            Value         "Ts"
            Show          off
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant"
          Show          off
          Position      [180, 45]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Operator"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "polarity"
            Show          off
          }
        }
        Component {
          Type          LogicalOperator
          Name          "Logical\nOperator"
          Show          off
          Position      [125, 45]
          Direction     up
          Flipped       off
          Parameter {
            Variable      "Operator"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Inputs"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Saturation
          Name          "Saturation"
          Show          off
          Position      [290, 45]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "UpperLimit"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "LowerLimit"
            Value         "0"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Logical\nOperator"
          SrcTerminal   1
          DstComponent  "Compare to\nConstant"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant"
          SrcTerminal   2
          DstComponent  "Periodic Average"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Logical\nOperator"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Periodic Average"
          SrcTerminal   1
          DstComponent  "Saturation"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Saturation"
          SrcTerminal   2
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Encoder1"
      Show          on
      Position      [260, 220]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "3"
      CodeFcn       base64 "SW5jbHVkZSgiRGlnaXRhbE91dC5oIik7CkluY2x1ZGUoIkVuY2"
"9kZXIuaCIpOwoKaW50IG1vZHVsZSA9IE1hc2tSZWFsRGF0YShNQVNLX1ZBUl9tb2R1bGUsIDApOwp"
"pbnQgcGFpcnMgPSBNYXNrUmVhbERhdGEoTUFTS19WQVJfcGFpcnMsIDApOwppbnQgY29kaW5nID0g"
"TWFza1JlYWxEYXRhKE1BU0tfVkFSX2NvZGluZywgMCktMTsKaW50IGV4dHJhcG9sYXRpb24gPSAoT"
"WFza1JlYWxEYXRhKE1BU0tfVkFSX2V4dHJhcG9sYXRpb24sIDApID09IDEpOwoKLy8gcmVnaXN0ZX"
"IgdGhlIGhhcmR3YXJlIHJlc291cmNlcwpSZXF1aXJlKCJJbmNyZW1lbnRhbCBlbmNvZGVyIiwgbW9"
"kdWxlKTsKaW50IGNobGVuZ3RoID0gTWFza1JlYWxEYXRhKE1BU0tfVkFSX2NobGVuZ3RoLCAwKTsK"
"aW50IGNoYW5uZWxbY2hsZW5ndGhdOwpmb3IgKGludCBpID0gMDsgaSA8IGNobGVuZ3RoOyArK2kpC"
"nsKICAgY2hhbm5lbFtpXSA9IE1hc2tSZWFsRGF0YShNQVNLX1ZBUl9jaGFubmVsLCBpKTsKICAgUm"
"VxdWlyZSgiRGlnaXRhbCBvdXRwdXQiLCBjaGFubmVsW2ldKTsKfQoKLy8gZ2VuZXJhdGUgaW5pdGl"
"hbGl6YXRpb24gY29kZSBwZXIgY2hhbm5lbApQcmludChJbml0Q29kZSwgInNldHVwRGlnaXRhbE91"
"dCglaSwgRE9fRU5DJWlBLCBET19OSU5WKTtcbiIsIGNoYW5uZWxbMF0sIG1vZHVsZSk7ClByaW50K"
"EluaXRDb2RlLCAic2V0dXBEaWdpdGFsT3V0KCVpLCBET19FTkMlaUIsIERPX05JTlYpO1xuIiwgY2"
"hhbm5lbFsxXSwgbW9kdWxlKTsKaWYoY2hsZW5ndGggPT0gMykKewoJUHJpbnQoSW5pdENvZGUsICJ"
"zZXR1cERpZ2l0YWxPdXQoJWksIERPX0VOQyVpSSwgRE9fTklOVik7XG4iLCBjaGFubmVsWzJdLCBt"
"b2R1bGUpOwp9ClByaW50KEluaXRDb2RlLCAic2V0dXBFbmNvZGVyKEVOQyVpLCAlcywgJWksICVpK"
"TtcbiIsCiAgICAgIG1vZHVsZSwgU2FtcGxlVGltZSwgcGFpcnMsIGNvZGluZyk7CgovLyBnZW5lcm"
"F0ZSBvdXRwdXQgY29kZQppZiAoTnVtSW5wdXRTaWduYWxzKDApID09IDIpCnsKICAgLy8gaWYgb25"
"seSB0d28gc2lnbmFscyBhcmUgZmVkIGluLCBhc3N1bWUgd2RvdCA9IDAKICAgUHJpbnQoT3V0cHV0"
"Q29kZSwgInVwZGF0ZUVuY29kZXIoRU5DJWksICVzLCAlcywgMC5mLCAlZCk7XG4iLAogICAgICAgI"
"CBtb2R1bGUsIElucHV0U2lnbmFsKDAsIDApLCBJbnB1dFNpZ25hbCgwLCAxKSwgZXh0cmFwb2xhdG"
"lvbik7Cn0KZWxzZSBpZihOdW1JbnB1dFNpZ25hbHMoMCkgPT0gMykKewogICBQcmludChPdXRwdXR"
"Db2RlLCAidXBkYXRlRW5jb2RlcihFTkMlaSwgJXMsICVzLCAlcywgJWQpO1xuIiwKICAgICAgICAg"
"bW9kdWxlLCBJbnB1dFNpZ25hbCgwLCAwKSwgSW5wdXRTaWduYWwoMCwgMSksIElucHV0U2lnbmFsK"
"DAsIDIpLCBleHRyYXBvbGF0aW9uKTsKfQplbHNlCnsKCVNldEVycm9yU3RhdHVzKCJUaGUgaW5wdX"
"QgbXVzdCBiZSBhIHZlY3RvciBzaWduYWwgW8+JLM+VXSBvciBbz4ksz5UsZM+JL2R0XS4iKTsKfQ="
"="
      MaskType      "Incremental Encoder"
      MaskDescription "Generate quadrature encoder signals on 3 digital output"
"s of the RT Box."
      MaskHelp      "incenc_rtbox.html"
      MaskDisplay   "text(['Incr.' char(10) 'Encoder'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if module ~= 1 && module ~= 2,\n  error('\"Encoder module"
"\" must be 1 or 2.');\nend\nif ~isreal(channel) || ~isvector(channel) || (num"
"el(channel) ~= 3 && numel(channel) ~= 2) ...\n   || any(floor(channel) ~= cha"
"nnel) || any(channel < 0),\n  error('\"Digital output channel(s)\" must be a "
"vector of 2 or 3 positive or zero integers.')\nelse\n  chlength = numel(chann"
"el);\nend\nif ~isscalar(pairs) || ~isfinite(pairs) || floor(pairs) ~= pairs |"
"| pairs < 0,\n  error('\"Line Pairs\" must be a positive integer scalar.');\n"
"end\nif coding ~= 1 && coding ~= 2,\n  error('Invalid \"Coding style\" value."
".');\nend\nif(numel(channel)== 3)\n\toutvec = [1 2 3];\nelse\n\toutvec = [1 2"
"];\nend\n"
      Parameter {
        Variable      "module"
        Prompt        "Encoder module"
        Type          FixedText
        PossibleValues {"Encoder 1", "Encoder 2"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "channel"
        Prompt        "Digital output channels (A, B) or (A, B, I)"
        Type          FreeText
        Value         "[0, 1, 2]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "pairs"
        Prompt        "Line pairs"
        Type          FreeText
        Value         "1024"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "coding"
        Prompt        "Coding in forward direction"
        Type          FixedText
        PossibleValues {"A follows B", "B follows A"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "extrapolation"
        Prompt        "Angle calculation"
        Type          FixedText
        PossibleValues {"Extrapolation", "Direct"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [860, 121; 2222, 331]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [325, 40]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [50, 40]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          CScript
          Name          "C-Script"
          Show          on
          Position      [120, 40]
          Direction     up
          Flipped       off
          Parameter {
            Variable      "NumInputs"
            Value         "-1"
            Show          off
          }
          Parameter {
            Variable      "NumOutputs"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "NumContStates"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "NumDiscStates"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "NumZCSignals"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "DirectFeedthrough"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "Ts"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "Parameters"
            Value         ""
            Show          off
          }
          Parameter {
            Variable      "LangStandard"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "GnuExtensions"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "RuntimeCheck"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Declarations"
            Value         ""
            Show          off
          }
          Parameter {
            Variable      "StartFcn"
            Value         base64 "aWYgKE51bUlucHV0U2lnbmFscygwKSAhPSAyICYmIE51"
"bUlucHV0U2lnbmFscygwKSAhPSAzKQp7CiAgIFNldEVycm9yTWVzc2FnZSgiVGhlIGlucHV0IG11c"
"3QgYmUgYSB2ZWN0b3Igc2lnbmFsIFvPiSzOuF0gb3IgW8+JLM64LM6xXS4iKTsKfQo="
            Show          off
          }
          Parameter {
            Variable      "OutputFcn"
            Value         "//Forward angle to continuous encoder\nOutput(0) = "
"Input(1);"
            Show          off
          }
          Parameter {
            Variable      "UpdateFcn"
            Value         ""
            Show          off
          }
          Parameter {
            Variable      "DerivativeFcn"
            Value         ""
            Show          off
          }
          Parameter {
            Variable      "TerminateFcn"
            Value         ""
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector"
          Show          off
          Position      [270, 40]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "3"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "outvec"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Continuous\n Encoder"
          Show          on
          Position      [205, 40]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "ticks = ticks*4;%four edges per pair of dark n light "
"lines\nquant = 2*pi/ticks;\nif(coding == 1)\n\tTtable = [0 0; 1 1; 0 1; 1 0];"
"\nelse\n\tTtable = [0 0; 1 1; 1 0; 0 1];\nend\n"
          Parameter {
            Variable      "ticks"
            Prompt        "LinePairs"
            Type          FreeText
            Value         "pairs"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "coding"
            Prompt        "Coding in forward direction"
            Type          FixedText
            PossibleValues {"00 01 11 10", "00 10 11 01"}
            Value         "coding"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [802, 176; 1481, 476]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "Phi"
              Show          on
              Position      [70, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Function
              Name          "Fcn"
              Show          on
              Position      [145, 80]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "f(u)"
                Value         "(u[1]+pi)"
                Show          off
              }
            }
            Component {
              Type          CombinatorialLogic
              Name          "Combinatorial\nLogic"
              Show          off
              Position      [520, 175]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "TruthTable"
                Value         "Ttable"
                Show          off
              }
            }
            Component {
              Type          CScript
              Name          "C-Script"
              Show          off
              Position      [450, 175]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "NumInputs"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "NumOutputs"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "NumContStates"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "NumDiscStates"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "NumZCSignals"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "DirectFeedthrough"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Ts"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "Parameters"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "LangStandard"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "GnuExtensions"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "RuntimeCheck"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Declarations"
                Value         "#include <math.h>\n\n\n"
                Show          off
              }
              Parameter {
                Variable      "StartFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "OutputFcn"
                Value         "//Coding \t00 01 11 10\nOutput(0) = ((int)(Inpu"
"t(0)+0.5)) & 1;\nOutput(1) = (int)(Input(0)+0.5) >> 1 & 1;\n\n"
                Show          off
              }
              Parameter {
                Variable      "UpdateFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "DerivativeFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "TerminateFcn"
                Value         ""
                Show          off
              }
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Discontinuous/Dead Zone"
              Name          "Dead Zone"
              Show          off
              Position      [435, 245]
              Direction     up
              Flipped       off
              Frame         [-15, -15; 15, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              Parameter {
                Variable      "lower"
                Value         "pi"
                Show          off
              }
              Parameter {
                Variable      "upper"
                Value         "pi+quant"
                Show          off
              }
              Terminal {
                Type          Input
                Position      [-15, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [19, 0]
                Direction     right
              }
            }
            Component {
              Type          ConstantRelationalOperator
              Name          "Compare to\nConstant2"
              Show          off
              Position      [515, 245]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          off
              Position      [230, 105]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "quant/2"
                Show          on
              }
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Discontinuous/Quantizer"
              Name          "Quantizer2"
              Show          off
              Position      [340, 85]
              Direction     up
              Flipped       off
              Frame         [-15, -15; 15, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              Parameter {
                Variable      "q"
                Value         "quant"
                Show          off
              }
              Parameter {
                Variable      "stepDetection"
                Value         "2"
                Show          off
              }
              Terminal {
                Type          Input
                Position      [-15, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [19, 0]
                Direction     right
              }
            }
            Component {
              Type          Sum
              Name          "Sum1"
              Show          off
              Position      [290, 85]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "++"
                Show          off
              }
            }
            Component {
              Type          Function
              Name          "Fcn1"
              Show          on
              Position      [230, 170]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "f(u)"
                Value         "u[1]/quant"
                Show          off
              }
            }
            Component {
              Type          Rounding
              Name          "Rounding"
              Show          off
              Position      [295, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Operation"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Math
              Name          "Math1"
              Show          off
              Position      [380, 175]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "6"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant4"
              Show          off
              Position      [325, 220]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "4"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "ABI"
              Show          on
              Position      [615, 180]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          SignalMux
              Name          "Mux"
              Show          off
              Position      [570, 180]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "[2 1]"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Dead Zone"
              SrcTerminal   2
              DstComponent  "Compare to\nConstant2"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Fcn1"
              SrcTerminal   2
              DstComponent  "Rounding"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant4"
              SrcTerminal   1
              Points        [350, 220]
              DstComponent  "Math1"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Phi"
              SrcTerminal   1
              DstComponent  "Fcn"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Rounding"
              SrcTerminal   2
              DstComponent  "Math1"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum1"
              SrcTerminal   1
              DstComponent  "Quantizer2"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [260, 105]
              DstComponent  "Sum1"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Fcn"
              SrcTerminal   2
              Points        [185, 80]
              Branch {
                Points        [185, 170]
                Branch {
                  Points        [185, 245]
                  DstComponent  "Dead Zone"
                  DstTerminal   1
                }
                Branch {
                  DstComponent  "Fcn1"
                  DstTerminal   1
                }
              }
              Branch {
                DstComponent  "Sum1"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Math1"
              SrcTerminal   1
              DstComponent  "C-Script"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "C-Script"
              SrcTerminal   2
              DstComponent  "Combinatorial\nLogic"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Mux"
              SrcTerminal   1
              DstComponent  "ABI"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Combinatorial\nLogic"
              SrcTerminal   2
              DstComponent  "Mux"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Compare to\nConstant2"
              SrcTerminal   2
              Points        [550, 245; 550, 185]
              DstComponent  "Mux"
              DstTerminal   3
            }
            Annotation {
              Name          "Required for zero crossings"
              Position      [320, 50]
            } 
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Continuous\n Encoder"
          SrcTerminal   2
          DstComponent  "Cont\nSelector"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "C-Script"
          SrcTerminal   2
          DstComponent  "Continuous\n Encoder"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "C-Script"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "SFP In"
      Show          on
      Position      [80, 300]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "4"
      CodeFcn       "Include(\"SFP.h\");\n\nint port = MaskRealData(MASK_VAR_p"
"ort, 0);\nint width = MaskRealData(MASK_VAR_width, 0);\nRequire(\"SFP input\""
", (port-1));\n\n\nPrint(InitCode, \"{ static float sfp%iInitData[] = {\\n\", "
"port-1);\nfor (int i = 0; i < width; ++i)\n{\n   Print(InitCode, \"%.9ef\", M"
"askRealData(MASK_VAR_default, i));\n   if (i < width - 1)\n      Print(InitCo"
"de, \",\");\n}\nPrint(InitCode, \"};\\n\");\nPrint(InitCode, \"setupSFP%iIn(%"
"i, sfp%iInitData);}\\n\", port-1, width, port-1);\n\nfor (int i = 0; i < widt"
"h; ++i)\n{\n   Print(OutputSignal(0, i), \"getSFP%iIn(%i)\", port-1, i);\n}\n"
      MaskType      "SFP In"
      MaskDescription "Receives signals from another RT Box on an SFP port\n"
      MaskHelp      "sfpin_rtbox.html"
      MaskDisplay   "text(['SFP' char(10) 'In'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(width) || width < 1,\n  error('\"Initial value"
"\" must be a positive integer.')\nend\n\nif ~isreal(default) || ~isvector(def"
"ault),\n  error('\"Initial value\" must be a real scalar or vector.')\nend\n"
"\nif numel(default) == 1,\n  default = repmat(default, width);\nelseif numel("
"default) ~= width,\n  error(['\"Initial value\" must be scalar or a vector wi"
"th length ' num2str(width) '.']);\nend\n"
      Parameter {
        Variable      "port"
        Prompt        "SFP port"
        Type          FixedText
        PossibleValues {"SFP A", "SFP B", "SFP C", "SFP D"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "width"
        Prompt        "Width"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "default"
        Prompt        "Initial value"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "tSample"
        Prompt        "Sample time (offline only)"
        Type          FreeText
        Value         "10e-6"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [619, 429; 1691, 573]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "width"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Delay
          Name          "Delay"
          Show          on
          Position      [185, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "N"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "X0"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "Ts"
            Value         "tSample"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Delay"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Delay"
          SrcTerminal   2
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "SFP Out"
      Show          on
      Position      [260, 300]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "4"
      CodeFcn       "Include(\"SFP.h\");\n\nint port = MaskRealData(MASK_VAR_p"
"ort, 0);\nRequire(\"SFP output\", (port-1));\n\nPrint(InitCode, \"setupSFP%iO"
"ut(%i);\\n\", (port-1), NumInputSignals(0));\n\nfor (int i = 0; i < NumInputS"
"ignals(0); ++i)\n{      \n   Print(OutputCode, \"setSFP%iOut(%i, %s);\\n\",(p"
"ort-1), i, InputSignal(0, i));\n}\n"
      MaskType      "SFP Out"
      MaskDescription "Sends signals to another RT Box on an SFP port\n"
      MaskHelp      "sfpout_rtbox.html"
      MaskDisplay   "text(['SFP' char(10) 'Out'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      Parameter {
        Variable      "port"
        Prompt        "SFP port"
        Type          FixedText
        PossibleValues {"SFP A", "SFP B", "SFP C", "SFP D"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "tSample"
        Prompt        "Sample time (offline only)"
        Type          FreeText
        Value         "10e-6"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [1428, 229; 2548, 373]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Delay
          Name          "Delay"
          Show          on
          Position      [185, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "N"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "X0"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "Ts"
            Value         "tSample"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "Delay"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Delay"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "PWM Out"
      Show          on
      Position      [260, 460]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "5"
      CodeFcn       "Include(\"DigitalOut.h\");\n\nint prd = MaskRealData(MASK"
"_VAR_prd, 0);\ndouble limit_delta = MaskRealData(MASK_VAR_limit_delta,0);\nin"
"t prscl = MaskRealData(MASK_VAR_prscl, 0);\nint delay = MaskRealData(MASK_VAR"
"_delay, 0);\nint type = MaskRealData(MASK_VAR_type, 0);\nint update = MaskRea"
"lData(MASK_VAR_update, 0);\ndouble offset = MaskRealData(MASK_VAR_offset, 0);"
"\nint sync = MaskRealData(MASK_VAR_sync, 0);\ndouble sampleTime = TargetRealD"
"ata(TARGET_VAR_SAMPLE_TIME, 0);\n\nint mstID = MaskRealData(MASK_VAR_channel,"
" 0);\n\nPrint(OutputCode, \"{\\n\");\nPrint(OutputCode, \"float freq_pu = %s;"
"\\n\", InputSignal(1,0));\nif (sync)\n{\n   Print(OutputCode, \"if (freq_pu <"
" 1) freq_pu = 1;\\n\", InputSignal(1,0));\n   Print(OutputCode, \"float prdPW"
"M = (float)%i/(int)(freq_pu+0.5);\\n\", prd);\n}\nelse\n{\n   Print(OutputCod"
"e, \"float prdPWM;\\n\");\n   Print(OutputCode, \"if (freq_pu < 0)\\n\");\n  "
" Print(OutputCode, \"{freq_pu = 0;\\n\");\n   Print(OutputCode, \"prdPWM = 0;"
"}\\n\");\n   Print(OutputCode, \"else\\n\");\n   Print(OutputCode, \"prdPWM ="
" %i/freq_pu;\\n\", prd);\n}\nPrint(OutputCode, \"int prdPWM_int = (int)(prdPW"
"M + 0.5);\\n\");\nPrint(OutputCode, \"if (prdPWM_int > 65535) \\n\");\nPrint("
"OutputCode, \"{prdPWM_int = 65535;\\n\");\nPrint(OutputCode, \"prdPWM = 65535"
";}\\n\");\nPrint(OutputCode, \"float gain = (prdPWM/%i/%.9ef);\\n\", type+1, "
"limit_delta);\n\nfor (int i = 0; i < NumInputSignals(0); ++i)\n{\n   int chan"
"nel = MaskRealData(MASK_VAR_channel, i);\n   int polar = MaskRealData(MASK_VA"
"R_polar, i);\n   \n   int slv = 0;\n   \n   if(i == 0)\n   {\n   \t\tslv = 0;"
"\n   }\n   else\n   {\n   \t\tslv = 1;\n   }\n   \n   Require(\"Digital outpu"
"t\", channel);\n\n   Print(InitCode, \"setupDigitalOut(%i, DO_PWM, DO_NINV);"
"\\n\", channel);\n      \n   \n\tPrint(InitCode, \"setupPWMGen(%i, %i, %i, %i"
", %i, %i, %i, %i, %i, %i, %i, %i);\\n\", channel, prd, delay, 0, prscl, 0, sl"
"v, mstID, sync, polar, type, update);\n   \n\tPrint(OutputCode, \"{\\n\"); \t"
"\n\t\n   Print(OutputCode, \"setPWMOutPrd(%i, prdPWM_int);\\n\", channel); \n"
"\t\n\tPrint(OutputCode,\"int shftPWM = (int)(prdPWM*(%s)+0.5);\\n\",InputSign"
"al(2,i));\n\tPrint(OutputCode, \"if (shftPWM < 0 || shftPWM >= prdPWM_int)\\n"
"\");\n\tPrint(OutputCode, \"{setPWMOutShft(%i, 0);}\\n\", channel);  \n\tPrin"
"t(OutputCode, \"else \\n\");\t\n\tPrint(OutputCode, \"{setPWMOutShft(%i, shft"
"PWM);}\\n\", channel); \n\t\n\tPrint(OutputCode, \"int cmpPWM = (int)(((%s) +"
" %.9ef)*gain + 0.5);\\n\", InputSignal(0, i), offset);\n   Print(OutputCode, "
"\"if (cmpPWM < 0) \\n\");\n   Print(OutputCode, \"{setPWMOutCmp(%i, 0);}\\n\""
", channel);\n   Print(OutputCode, \"else if (cmpPWM > 65535) \\n\");\n   Prin"
"t(OutputCode, \"{setPWMOutCmp(%i, 65535);}\\n\", channel);\n   Print(OutputCo"
"de, \"else \\n\");\n   Print(OutputCode, \"{setPWMOutCmp(%i, cmpPWM);}\\n\", "
"channel);  \n   Print(OutputCode, \"}\\n\"); \n\t  \t  \t\t\n}\nPrint(OutputC"
"ode, \"}\\n\"); \t\n"
      MaskType      "PWM Out (Variable)"
      MaskDescription "Generate a variable PWM signal on a digital output."
      MaskHelp      "pwmout_var_rtbox.html"
      MaskDisplay   "text(8, 0, ['PWM' char(10) 'Out'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Digital output ch"
"annel(s)\" must be a scalar or vector of positive or zero integers.')\nend\n"
"\nif any(fc < 0)\n\terror('\"Carrier frequency [Hz]\" must be greater than 0."
"')\nend\n\nif any(fc > 6.65e6)\n\terror('\"Carrier frequency [Hz]\" higer tha"
"n 6.65 MHz will result in resolution lower than 20 clock cycles per carrier p"
"eriod, please reduce the carrier frequency.')\nend\n\nif any(fc < 0.06)\n\ter"
"ror('\"Carrier frequency [Hz]\" lower than 0.06 Hz, please use \"Digital Out"
"\" to generate low frequency PWM.')\nend\n\nif any(delay_sec < 0)\n\twarning("
"'\"Turn-on delay [s]\" must be greater than 0s.')\nend\n\nif any(delay_sec > "
"(1/fc))\n\terror(['\"Turn-on delay [s]\" should not be larger than the carrie"
"r period ' num2str(1/fc) 's.'])\nend\n\nif any((polar ~= 0) && (polar ~= 1))"
"\n\terror(['\"Polarity\" must be 0 or 1.'])\nend\n\nwidth = numel(channel);\n"
"if numel(fc) ~= 1,\n  error('\"Carier frequency\" must be scalar.');\nend\nif"
" numel(type) ~= 1,\n  error('\"Carier type\" must be scalar.');\nend\nif nume"
"l(limits) ~= 2,\n  error('\"Carrier limits\" must be a vecor with two element"
"s.');\nend\nif numel(delay_sec) ~= 1,\n  error('\"Turn-on delay\" must be sca"
"lar.');\nend\nif numel(update) ~= 1,\n  error('\"Update\" must be scalar.');"
"\nend\nif numel(polar) == 1,\n  polar = repmat(polar, size(channel))\nelseif "
"numel(polar) ~= width,\n  error('\"Polarity\" must be scalar or a vector of t"
"he same length as the number of channels.');\nend\n\nnum_prd_ticks = round(1/"
" (fc * 7.5e-9));\nnum_bin_digits = floor(log(num_prd_ticks)/log(2)) + 1;\nif "
"num_bin_digits > 16,\n   prscl = num_bin_digits - 16;\nelse\n   prscl = 0;\ne"
"nd\nprd = round(1/ (fc * 7.5e-9 * 2^prscl));\n\nlimit_delta = limits(2)-limit"
"s(1);\noffset = -limits(1);\n\ndelay = round(delay_sec / (7.5e-9 * 2^prscl));"
" \nsync = sync - 1;\ntype = type - 1;\nupdate = update - 1;\n\nTs_fpga = 7.5e"
"-9;\n\ngain_offline = 1/(type+1)/limit_delta;\n\nnum_channel = numel(channel)"
";\n\npolar = 1-polar;\n"
      Parameter {
        Variable      "channel"
        Prompt        "Digital output channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "type"
        Prompt        "Carrier type"
        Type          FixedText
        PossibleValues {"Sawtooth", "Symmetrical"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "fc"
        Prompt        "Norminal carrier frequency [Hz]"
        Type          FreeText
        Value         "10000"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "limits"
        Prompt        "Carrier limits"
        Type          FreeText
        Value         "[-1 1]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "delay_sec"
        Prompt        "Turn-on delay [s]"
        Type          FreeText
        Value         "1e-6"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "polar"
        Prompt        "Polarity (Output when Input > Carrier) "
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "update"
        Prompt        "Update"
        Type          FixedText
        PossibleValues {"On carrier minimum", "Immediately", "On carrier maxim"
"um", "On carrier minimum/maximum"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "sync"
        Prompt        "Synchronization with model step"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, -10]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Schematic {
        Location      [693, 146; 1493, 583]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [185, 120]
          Direction     left
          Flipped       on
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "m"
          Show          on
          Position      [60, 80]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "fc'"
          Show          on
          Position      [60, 120]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "ph'"
          Show          on
          Position      [60, 160]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "PWM"
          Show          on
          Position      [120, 120]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, 10]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, -10]
            Direction     left
          }
          Schematic {
            Location      [60, 887; 623, 1212]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          ConfigurableSubsystem
              Name          "Carrier"
              Show          on
              Position      [215, 180]
              Direction     up
              Flipped       off
              Frame         [-20, -20; 20, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              MaskInit      "num_channel_1 = num_channel - 1;"
              Parameter {
                Variable      "num_channel"
                Prompt        "Number of channels"
                Type          FreeText
                Value         "numel(channel)"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "clk_cntr"
                Prompt        "Counter clock [s]"
                Type          FreeText
                Value         "Ts_fpga*(2^prscl)"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "update"
                Prompt        "Update"
                Type          FreeText
                Value         "update+1"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "prd_init"
                Prompt        "Norminal period"
                Type          FreeText
                Value         "prd"
                Show          off
                Tunable       off
                TabName       ""
              }
              Terminal {
                Type          Input
                Position      [-20, 10]
                Direction     left
              }
              Terminal {
                Type          Input
                Position      [-20, -10]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 10]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [24, -10]
                Direction     right
              }
              TerminalNames { "ph", "prd", "cntr", "sync" }
              Location      [1571, 473; 2334, 1074]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Sawtooth"
                Schematic {
                  Component {
                    Type          Constant
                    Name          "Constant2"
                    Show          off
                    Position      [260, 100]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Integrator
                    Name          "Integrator1"
                    Show          off
                    Position      [390, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "ExternalReset"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "InitialConditionSource"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "x0"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "ShowStatePort"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "-inf"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "SaH"
                    Show          off
                    Position      [460, 170]
                    Direction     down
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                      Index         "1"
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "2"
                    }
                    Schematic {
                      Location      [415, 55; 662, 169]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [60, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [155, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [105, 30]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "3"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC"
                    Show          off
                    Position      [335, 210]
                    Direction     left
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Constant
                    Name          "Constant"
                    Show          off
                    Position      [335, 40]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "1/clk_cntr"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch"
                    Show          off
                    Position      [330, 120]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator1"
                    Show          off
                    Position      [385, 165]
                    Direction     right
                    Flipped       on
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator"
                    Show          off
                    Position      [330, 70]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [60, 120]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [540, 170]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [540, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Delays/Pulse Delay"
                    Name          "Pulse Delay"
                    Show          off
                    Position      [385, 210]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "T_d"
                      Value         "clk_cntr"
                      Show          off
                    }
                    Parameter {
                      Variable      "y_init"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "buffer_size"
                      Value         "1024"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum"
                    Show          off
                    Position      [160, 125]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "|-+"
                      Show          off
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC3"
                    Show          off
                    Position      [215, 210]
                    Direction     right
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [265, 210]
                    Direction     left
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [540, 120]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem"
                    Show          off
                    Position      [460, 120]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "0", "prd", "sync" }
                    Location      [1676, 670; 2079, 921]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "On carrier minimum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "Immediately"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant"
                          Show          off
                          Position      [175, 60]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier minimum/maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          LogicalOperator
                          Name          "Logical\nOperator"
                          Show          off
                          Position      [145, 60]
                          Direction     up
                          Flipped       off
                          Parameter {
                            Variable      "Operator"
                            Value         "2"
                            Show          off
                          }
                          Parameter {
                            Variable      "Inputs"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Logical\nOperator"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [100, 40; 100, 55]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [100, 80; 100, 65]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   3
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "update"
                      Show          off
                    }
                  }
                  Component {
                    Type          Product
                    Name          "Product2"
                    Show          off
                    Position      [115, 125]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation"
                    Show          off
                    Position      [210, 125]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem1"
                    Show          off
                    Position      [260, 65]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "In", "Out" }
                    Location      [1506, 634; 1947, 832]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "num_channel = 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [170, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [125, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                      Name          "num_channel > 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalSelector
                          Name          "Cont\nSelector"
                          Show          off
                          Position      [135, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "InputWidth"
                            Value         "1"
                            Show          off
                          }
                          Parameter {
                            Variable      "OutputIndices"
                            Value         "ones(num_channel_1,1)"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [180, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "[1 num_channel_1]"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [135, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [90, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          Points        [160, 50; 160, 70]
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Cont\nSelector"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "In"
                          SrcTerminal   1
                          DstComponent  "Cont\nSelector"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "(num_channel>1) + 1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   5
                    Points        [390, 45; 420, 45; 420, 160]
                    DstComponent  "Comparator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC"
                    SrcTerminal   2
                    DstComponent  "Pulse Delay"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse Delay"
                    SrcTerminal   1
                    Points        [460, 210]
                    DstComponent  "SaH"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant"
                    SrcTerminal   1
                    Points        [355, 40; 355, 60]
                    DstComponent  "Integrator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant2"
                    SrcTerminal   1
                    Points        [280, 100; 280, 115]
                    DstComponent  "Switch"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    DstComponent  "IC3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Product2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Product2"
                    SrcTerminal   1
                    DstComponent  "Sum"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator1"
                    SrcTerminal   3
                    Points        [360, 165]
                    Branch {
                      Points        [300, 165]
                      Branch {
                        DstComponent  "Logical\nOperator"
                        DstTerminal   3
                      }
                      Branch {
                        Points        [300, 210]
                        Branch {
                          DstComponent  "Cont\nSelector1"
                          DstTerminal   1
                        }
                        Branch {
                          DstComponent  "IC"
                          DstTerminal   1
                        }
                      }
                    }
                    Branch {
                      Points        [360, 130]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SaH"
                    SrcTerminal   2
                    Points        [420, 170]
                    Branch {
                      DstComponent  "Comparator1"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [420, 280; 80, 280; 80, 130]
                      DstComponent  "Product2"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    Points        [500, 170]
                    Branch {
                      DstComponent  "SaH"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [500, 240; 160, 240]
                      DstComponent  "Sum"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem"
                    SrcTerminal   3
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch"
                    SrcTerminal   1
                    Points        [350, 80]
                    DstComponent  "Integrator1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator"
                    SrcTerminal   1
                    DstComponent  "Integrator1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum"
                    SrcTerminal   1
                    DstComponent  "Saturation"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation"
                    SrcTerminal   2
                    DstComponent  "Switch"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem1"
                    SrcTerminal   2
                    Points        [290, 65]
                    Branch {
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [290, 155; 330, 155]
                      DstComponent  "Switch"
                      DstTerminal   4
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC3"
                    SrcTerminal   2
                    Points        [180, 210; 180, 65]
                    DstComponent  "Configurable\nSubsystem1"
                    DstTerminal   1
                  }
                }
                Name          "Symmetrical"
                Schematic {
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [65, 235]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [680, 395]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [680, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Constant
                    Name          "Constant"
                    Show          off
                    Position      [110, 165]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "1/clk_cntr"
                      Show          off
                    }
                  }
                  Component {
                    Type          Integrator
                    Name          "Integrator1"
                    Show          off
                    Position      [385, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "ExternalReset"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "InitialConditionSource"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "x0"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "ShowStatePort"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "-inf"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator2"
                    Show          off
                    Position      [460, 390]
                    Direction     right
                    Flipped       on
                  }
                  Component {
                    Type          Subsystem
                    Name          "SaH3"
                    Show          off
                    Position      [635, 395]
                    Direction     down
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                      Index         "1"
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "2"
                    }
                    Schematic {
                      Location      [415, 55; 662, 169]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [60, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [155, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [105, 30]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "3"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC2"
                    Show          off
                    Position      [500, 470]
                    Direction     left
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Delays/Pulse Delay"
                    Name          "Pulse Delay2"
                    Show          off
                    Position      [550, 470]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "T_d"
                      Value         "clk_cntr"
                      Show          off
                    }
                    Parameter {
                      Variable      "y_init"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "buffer_size"
                      Value         "1024"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch1"
                    Show          off
                    Position      [210, 190]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain1"
                    Show          off
                    Position      [160, 195]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "-1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator3"
                    Show          off
                    Position      [460, 430]
                    Direction     left
                    Flipped       off
                  }
                  Component {
                    Type          Constant
                    Name          "Constant5"
                    Show          off
                    Position      [580, 435]
                    Direction     right
                    Flipped       on
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Logical/SR Flip-flop"
                    Name          "SR Flip-flop1"
                    Show          off
                    Position      [240, 405]
                    Direction     down
                    Flipped       on
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    Parameter {
                      Variable      "x_init"
                      Value         "0"
                      Show          off
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, -10]
                      Direction     right
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 10]
                      Direction     right
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain2"
                    Show          off
                    Position      [555, 395]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "K"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator"
                    Show          off
                    Position      [305, 385]
                    Direction     down
                    Flipped       on
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator1"
                    Show          off
                    Position      [305, 425]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator4"
                    Show          off
                    Position      [395, 275]
                    Direction     up
                    Flipped       on
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch2"
                    Show          off
                    Position      [335, 350]
                    Direction     up
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch3"
                    Show          off
                    Position      [365, 350]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch4"
                    Show          off
                    Position      [270, 300]
                    Direction     down
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum1"
                    Show          off
                    Position      [245, 355]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "-+"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain3"
                    Show          off
                    Position      [190, 395]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [485, 110]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Product
                    Name          "Product2"
                    Show          off
                    Position      [150, 240]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [680, 260]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem"
                    Show          off
                    Position      [570, 260]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "0", "prd", "sync" }
                    Location      [1968, 990; 2249, 1176]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "On carrier minimum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [135, 40; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "Immediately"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant"
                          Show          off
                          Position      [175, 60]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier minimum/maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          LogicalOperator
                          Name          "Logical\nOperator"
                          Show          off
                          Position      [145, 60]
                          Direction     up
                          Flipped       off
                          Parameter {
                            Variable      "Operator"
                            Value         "2"
                            Show          off
                          }
                          Parameter {
                            Variable      "Inputs"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Logical\nOperator"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [100, 40; 100, 55]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [100, 80; 100, 65]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   3
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "update"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem1"
                    Show          off
                    Position      [340, 160]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -20; 10, 20]
                    LabelPosition [-13, 0]
                    LabelAlign    right
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "In", "Out" }
                    Location      [1506, 634; 1947, 832]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "num_channel = 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [170, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [125, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                      Name          "num_channel > 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalSelector
                          Name          "Cont\nSelector"
                          Show          off
                          Position      [135, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "InputWidth"
                            Value         "1"
                            Show          off
                          }
                          Parameter {
                            Variable      "OutputIndices"
                            Value         "ones(num_channel_1,1)"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [180, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "[1 num_channel_1]"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [135, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [90, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          Points        [160, 50; 160, 70]
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Cont\nSelector"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "In"
                          SrcTerminal   1
                          DstComponent  "Cont\nSelector"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "(num_channel>1) + 1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch1"
                    SrcTerminal   1
                    DstComponent  "Integrator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant5"
                    SrcTerminal   1
                    DstComponent  "Comparator3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain1"
                    SrcTerminal   2
                    DstComponent  "Switch1"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC2"
                    SrcTerminal   2
                    DstComponent  "Pulse Delay2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse Delay2"
                    SrcTerminal   1
                    Points        [635, 470]
                    DstComponent  "SaH3"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator"
                    SrcTerminal   1
                    Points        [280, 385; 280, 395]
                    DstComponent  "SR Flip-flop1"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator1"
                    SrcTerminal   1
                    Points        [280, 425; 280, 415]
                    DstComponent  "SR Flip-flop1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch2"
                    SrcTerminal   1
                    DstComponent  "Logical\nOperator"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch3"
                    SrcTerminal   1
                    Points        [365, 420]
                    DstComponent  "Logical\nOperator1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain3"
                    SrcTerminal   2
                    Points        [190, 360]
                    DstComponent  "Sum1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum1"
                    SrcTerminal   1
                    Points        [275, 355]
                    DstComponent  "Switch4"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   5
                    Points        [385, 175; 520, 175; 520, 385]
                    Branch {
                      Points        [520, 425]
                      DstComponent  "Comparator3"
                      DstTerminal   2
                    }
                    Branch {
                      DstComponent  "Comparator2"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator4"
                    SrcTerminal   3
                    Points        [395, 300]
                    Branch {
                      DstComponent  "Switch3"
                      DstTerminal   4
                    }
                    Branch {
                      Points        [305, 300]
                      Branch {
                        DstComponent  "Switch2"
                        DstTerminal   4
                      }
                      Branch {
                        DstComponent  "Switch4"
                        DstTerminal   4
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch4"
                    SrcTerminal   1
                    Points        [270, 210]
                    DstComponent  "Integrator1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SR Flip-flop1"
                    SrcTerminal   3
                    Points        [210, 395]
                    DstComponent  "Switch1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Product2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    DstComponent  "SaH3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Product2"
                    SrcTerminal   1
                    Points        [190, 240]
                    Branch {
                      Points        [390, 240]
                      DstComponent  "Comparator4"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [190, 330]
                      Branch {
                        DstComponent  "Switch4"
                        DstTerminal   3
                      }
                      Branch {
                        Points        [190, 350]
                        DstComponent  "Sum1"
                        DstTerminal   2
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem"
                    SrcTerminal   3
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain2"
                    SrcTerminal   2
                    Points        [530, 395]
                    Branch {
                      DstComponent  "Comparator2"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [530, 450; 190, 450]
                      DstComponent  "Gain3"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [530, 240; 400, 240]
                      DstComponent  "Comparator4"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SaH3"
                    SrcTerminal   2
                    Points        [600, 395]
                    Branch {
                      DstComponent  "Gain2"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [600, 520; 115, 520; 115, 245]
                      DstComponent  "Product2"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant"
                    SrcTerminal   1
                    Points        [130, 165]
                    Branch {
                      DstComponent  "Gain1"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [175, 165; 175, 185]
                      DstComponent  "Switch1"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator3"
                    SrcTerminal   3
                    Points        [420, 430]
                    Branch {
                      Points        [365, 430]
                      Branch {
                        DstComponent  "Logical\nOperator1"
                        DstTerminal   2
                      }
                      Branch {
                        Points        [365, 470]
                        Branch {
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Branch {
                          Points        [365, 510; 610, 510; 610, 110]
                          DstComponent  "Cont\nSelector1"
                          DstTerminal   1
                        }
                      }
                    }
                    Branch {
                      Points        [420, 250]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator2"
                    SrcTerminal   3
                    Points        [430, 390]
                    Branch {
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                    Branch {
                      Points        [430, 270]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem1"
                    SrcTerminal   2
                    Points        [340, 200]
                    Branch {
                      DstComponent  "Integrator1"
                      DstTerminal   3
                    }
                    Branch {
                      Points        [340, 310]
                      Branch {
                        Points        [370, 310]
                        DstComponent  "Switch3"
                        DstTerminal   2
                      }
                      Branch {
                        DstComponent  "Switch2"
                        DstTerminal   3
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    Points        [340, 110]
                    DstComponent  "Configurable\nSubsystem1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "type+1"
                Show          off
              }
            }
            Component {
              Type          Comparator
              Name          "Comparator"
              Show          off
              Position      [310, 185]
              Direction     right
              Flipped       off
            }
            Component {
              Type          Product
              Name          "Divide"
              Show          off
              Position      [130, 155]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "Inputs"
                Value         "*/"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant3"
              Show          off
              Position      [75, 170]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "prd"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum"
              Show          off
              Position      [85, 110]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          off
              Position      [65, 80]
              Direction     left
              Flipped       on
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              Parameter {
                Variable      "Value"
                Value         "offset"
                Show          off
              }
            }
            Component {
              Type          Gain
              Name          "Gain1"
              Show          off
              Position      [130, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "gain_offline"
                Show          off
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Delays/Turn-on Delay"
              Name          "Turn-on Delay"
              Show          off
              Position      [470, 190]
              Direction     up
              Flipped       on
              Frame         [-15, -15; 15, 15]
              LabelPosition [0, -18]
              LabelAlign    down
              Parameter {
                Variable      "T_d"
                Value         "delay_sec"
                Show          off
              }
              Terminal {
                Type          Input
                Position      [-15, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [19, 0]
                Direction     right
              }
            }
            Component {
              Type          Constant
              Name          "Constant1"
              Show          off
              Position      [435, 225]
              Direction     right
              Flipped       on
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "polar"
                Show          off
              }
            }
            Component {
              Type          Product
              Name          "Product2"
              Show          off
              Position      [190, 115]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Configurable\nSubsystem"
              Show          off
              Position      [245, 115]
              Direction     up
              Flipped       on
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              SampleTime    "-1"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-20, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [0, -10]
                Direction     up
              }
              TerminalNames { "mi", "mo", "sync1" }
              Location      [883, 1003; 1288, 1239]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Edge triggered"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          CScript
                    Name          "Vectroised\nTrigger"
                    Show          on
                    Position      [165, 75]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "NumInputs"
                      Value         "num_channel*2"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumOutputs"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumContStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumDiscStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumZCSignals"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DirectFeedthrough"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Ts"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "Parameters"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "LangStandard"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "GnuExtensions"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "RuntimeCheck"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Declarations"
                      Value         "#include <stdlib.h>\n#include <math.h>\n#"
"include <string.h>\n#include <limits.h>\n#include <float.h>\n\nstatic int num"
"_channel;\nstatic int* sync_pre;"
                      Show          off
                    }
                    Parameter {
                      Variable      "StartFcn"
                      Value         "num_channel = ParamRealData(0,0);\nsync_p"
"re = (int*) malloc(num_channel*sizeof(int));"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputFcn"
                      Value         "if(IsMajorStep)\n{\n\tfor(int id = 0; id "
"< num_channel; id++)\n\t{\n\t\tif(Input(id) == 1 && sync_pre[id] == 0)\n\t\t{"
"\n\t\t\tOutput(id) = Input(num_channel+id);\n\t\t}\n\t\tsync_pre[id] = Input("
"id);\n\t}\n}"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpdateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "DerivativeFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "TerminateFcn"
                      Value         ""
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [110, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[num_channel num_channel]"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Vectroised\nTrigger"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Vectroised\nTrigger"
                    SrcTerminal   2
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "sync1"
                    SrcTerminal   1
                    Points        [90, 40; 90, 70]
                    DstComponent  "Mux"
                    DstTerminal   2
                  }
                }
                Name          "Natural"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "(update==1)+1"
                Show          off
              }
            }
            Component {
              Type          ConstantRelationalOperator
              Name          "Compare to\nConstant"
              Show          off
              Position      [95, 215]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum1"
              Show          off
              Position      [130, 190]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "sw"
              Show          on
              Position      [520, 190]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "ph'"
              Show          on
              Position      [40, 190]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "fc'"
              Show          on
              Position      [40, 150]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "m"
              Show          on
              Position      [40, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          SignalSwitch
              Name          "Switch"
              Show          off
              Position      [405, 190]
              Direction     left
              Flipped       on
              Parameter {
                Variable      "Criteria"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant4"
              Show          off
              Position      [340, 225]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum2"
              Show          off
              Position      [360, 200]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|-+"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum1"
              SrcTerminal   1
              DstComponent  "Carrier"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   4
              Points        [245, 170]
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Divide"
              SrcTerminal   1
              Points        [155, 155]
              Branch {
                Points        [155, 120]
                DstComponent  "Product2"
                DstTerminal   2
              }
              Branch {
                Points        [155, 170]
                DstComponent  "Carrier"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant3"
              SrcTerminal   1
              Points        [95, 170; 95, 160]
              DstComponent  "Divide"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum"
              SrcTerminal   1
              DstComponent  "Gain1"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [85, 80]
              DstComponent  "Sum"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Gain1"
              SrcTerminal   2
              DstComponent  "Product2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Product2"
              SrcTerminal   1
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Compare to\nConstant"
              SrcTerminal   2
              DstComponent  "Sum1"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Turn-on Delay"
              SrcTerminal   2
              DstComponent  "sw"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "ph'"
              SrcTerminal   1
              Points        [60, 190]
              Branch {
                DstComponent  "Compare to\nConstant"
                DstTerminal   1
              }
              Branch {
                DstComponent  "Sum1"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "fc'"
              SrcTerminal   1
              DstComponent  "Divide"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "m"
              SrcTerminal   1
              DstComponent  "Sum"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant1"
              SrcTerminal   1
              Points        [405, 225]
              DstComponent  "Switch"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Switch"
              SrcTerminal   1
              DstComponent  "Turn-on Delay"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant4"
              SrcTerminal   1
              DstComponent  "Sum2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum2"
              SrcTerminal   1
              DstComponent  "Switch"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   3
              DstComponent  "Comparator"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Configurable\nSubsystem"
              SrcTerminal   2
              Points        [270, 180]
              DstComponent  "Comparator"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Comparator"
              SrcTerminal   3
              Points        [335, 185]
              Branch {
                DstComponent  "Switch"
                DstTerminal   3
              }
              Branch {
                DstComponent  "Sum2"
                DstTerminal   2
              }
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "m"
          SrcTerminal   1
          Points        [80, 110]
          DstComponent  "PWM"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "PWM"
          SrcTerminal   1
          DstComponent  "1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "fc'"
          SrcTerminal   1
          DstComponent  "PWM"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "ph'"
          SrcTerminal   1
          Points        [80, 130]
          DstComponent  "PWM"
          DstTerminal   2
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "PWM Out1"
      Show          on
      Position      [260, 375]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "6"
      CodeFcn       "Include(\"DigitalOut.h\");\n\nint prdPWM_int = MaskRealDa"
"ta(MASK_VAR_prd, 0);\nint min = MaskRealData(MASK_VAR_min, 0);\nint prscl = M"
"askRealData(MASK_VAR_prscl, 0);\nint delay = MaskRealData(MASK_VAR_delay, 0);"
"\nint type = MaskRealData(MASK_VAR_type, 0);\nint update = MaskRealData(MASK_"
"VAR_update, 0);\ndouble gain = MaskRealData(MASK_VAR_gain, 0);\ndouble offset"
" = MaskRealData(MASK_VAR_offset, 0);\nint sync = MaskRealData(MASK_VAR_sync, "
"0);\ndouble sampleTime = TargetRealData(TARGET_VAR_SAMPLE_TIME, 0);\n\nunsign"
"ed int numSteps = sampleTime / 7.5e-9;\nunsigned int k = (unsigned int)((doub"
"le) numSteps / prdPWM_int + 0.5);\nif (sync && abs(k * prdPWM_int - numSteps)"
" > k)\n{\n   SetErrorStatus(\"For synchronized PWM, the discretization step s"
"ize must \"\n                  \"be an integer multiple of the PWM period.\")"
";\n}\n\n\nfor (int i = 0; i < NumInputSignals(0); ++i)\n{\n   int channel = M"
"askRealData(MASK_VAR_channel, i);\n   int shft = MaskRealData(MASK_VAR_shft, "
"i);\n   int polar = MaskRealData(MASK_VAR_polar, i);\n      \n   Require(\"Di"
"gital output\", channel);\n   \n   Print(InitCode, \"setupDigitalOut(%i, DO_P"
"WM, DO_NINV);\\n\", channel);\n   \n\tPrint(InitCode, \"setupPWMGen(%i, %i, %"
"i, %i, %i, %i, %i, %i, %i, %i, %i, %i);\\n\", channel, prdPWM_int, delay, 0, "
"prscl, 0, 0, channel, sync, polar, type, update);\n   Print(InitCode, \"setPW"
"MOutPrd(%i, %i);\\n\", channel, prdPWM_int);   \n   Print(InitCode, \"setPWMO"
"utShft(%i, %i);\\n\", channel, shft); \t\n\n\tPrint(OutputCode, \"{\\n\");\n"
"\t\n   Print(OutputCode, \"int cmpPWM = (int)(((float)(%s) + %f)*%f + 0.5);\\"
"n\", InputSignal(0, i), offset, gain);\n   Print(OutputCode, \"if (cmpPWM < 0"
") \\n\");\n   Print(OutputCode, \"{setPWMOutCmp(%i, 0);}\\n\", channel);\n   "
"Print(OutputCode, \"else if (cmpPWM > 65535) \\n\");\n   Print(OutputCode, \""
"{setPWMOutCmp(%i, 65535);}\\n\", channel);\n   Print(OutputCode, \"else \\n\""
");\n   Print(OutputCode, \"{setPWMOutCmp(%i, cmpPWM);}\\n\", channel);\n   \n"
"   Print(OutputCode, \"}\\n\"); \n}\n"
      MaskType      "PWM Out"
      MaskDescription "Generate a configurable PWM signal on a digital output."
      MaskHelp      "pwmout_rtbox.html"
      MaskDisplay   "text(['PWM' char(10) 'Out'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if ~isreal(channel) || ~isvector(channel) ...\n   || any("
"floor(channel) ~= channel) || any(channel < 0),\n  error('\"Digital output ch"
"annel(s)\" must be a scalar or vector of positive or zero integers.')\nend\n"
"\nif any(fc < 0)\n\terror('\"Carrier frequency [Hz]\" must be greater than 0."
"')\nend\n\nif any(fc > 6.65e6)\n\terror('\"Carrier frequency [Hz]\" higer tha"
"n 6.65 MHz will result in resolution lower than 20 clock cycles per carrier p"
"eriod, please reduce the carrier frequency.')\nend\n\nif any(fc < 0.06)\n\ter"
"ror('\"Carrier frequency [Hz]\" lower than 0.06 Hz, please use \"Digital Out"
"\" to generate low frequency PWM.')\nend\n\nif any(shft_pu < 0) || any(shft_p"
"u > 1)\n\terror('\"Carrier phase shift [p.u.]\" must be between 0 and 1.')\ne"
"nd\n\nif any(delay_sec < 0)\n\twarning('\"Turn-on delay [s]\" must be greater"
" than 0s.')\nend\n\nif any(delay_sec > (1/fc))\n\terror(['\"Turn-on delay [s]"
"\" should not be larger than the carrier period ' num2str(1/fc) 's.'])\nend\n"
"\nwidth = numel(channel);\nif numel(fc) ~= 1,\n  error('\"Carier frequency\" "
"must be scalar.');\nend\nif numel(type) ~= 1,\n  error('\"Carier type\" must "
"be scalar.');\nend\nif numel(limits) ~= 2,\n  error('\"Carrier limits\" must "
"be a vecor with two elements.');\nend\nif numel(delay_sec) ~= 1,\n  error('\""
"Turn-on delay\" must be scalar.');\nend\nif any((polar ~= 0) && (polar ~= 1) "
"&& (polar ~= 2))\n\terror(['\"Polarity\" must be 0 or 1.'])\nend\nif numel(up"
"date) ~= 1,\n  error('\"Update\" must be scalar.');\nend\nif numel(shft_pu) ="
"= 1,\n  shft_pu = repmat(shft_pu, size(channel))\nelseif numel(shft_pu) ~= wi"
"dth,\n  error('\"Carrier phase shift\" must be scalar or a vector of the same"
" length as the number of channels.');\nend\nif numel(polar) == 1,\n  polar = "
"repmat(polar, size(channel))\nelseif numel(polar) ~= width,\n  error('\"Polar"
"ity\" must be scalar or a vector of the same length as the number of channels"
".');\nend\n\nnum_prd_ticks = round(1/ (fc * 7.5e-9));\nnum_bin_digits = floor"
"(log(num_prd_ticks)/log(2)) + 1;\nif num_bin_digits > 16,\n   prscl = num_bin"
"_digits - 16;\nelse\n   prscl = 0;\nend\nprd = round(1/ (fc * 7.5e-9 * 2^prsc"
"l));\nif(type==1), \n   gain = prd / (limits(2)-limits(1));\nelse\n   gain = "
"prd/2/ (limits(2)-limits(1));\nend\n\nmin = 0;\nshft = round(shft_pu * prd);"
"\ndelay = round(delay_sec / (7.5e-9 * 2^prscl)); \n\nlimit_delta = limits(2)-"
"limits(1);\noffset = -limits(1);\n\ntype = type - 1;\nupdate = update - 1;\ns"
"ync = sync - 1;\n\nTs_fpga = 7.5e-9;\n\ngain_offline = 1/(type+1)/limit_delta"
";\n\nnum_channel = numel(channel);\n\npolar = 1-bitand(polar, 1);\n\n"
      Parameter {
        Variable      "channel"
        Prompt        "Digital output channel(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "type"
        Prompt        "Carrier type"
        Type          FixedText
        PossibleValues {"Sawtooth", "Symmetrical"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "fc"
        Prompt        "Carrier frequency [Hz]"
        Type          FreeText
        Value         "10000"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "shft_pu"
        Prompt        "Carrier phase shift [p.u.]"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "limits"
        Prompt        "Carrier limits"
        Type          FreeText
        Value         "[-1 1]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "delay_sec"
        Prompt        "Turn-on delay [s] "
        Type          FreeText
        Value         "1e-6"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "polar"
        Prompt        "Polarity (Output when Input > Carrier)"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "update"
        Prompt        "Update"
        Type          FixedText
        PossibleValues {"On carrier minimum", "Immediately", "On carrier maxim"
"um", "On carrier minimum/maximum"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "sync"
        Prompt        "Synchronization with model step"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [1104, 292; 2335, 436]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [180, 120]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [60, 80]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "numel(channel)"
            Show          off
          }
        }
        Component {
          Type          Constant
          Name          "Constant4"
          Show          off
          Position      [60, 120]
          Direction     right
          Flipped       off
          Frame         [-10, -10; 10, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Value"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Constant
          Name          "Constant5"
          Show          off
          Position      [60, 160]
          Direction     right
          Flipped       off
          Frame         [-10, -10; 10, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Value"
            Value         "[shft_pu(1) mod(shft_pu(2:num_channel)-shft_pu(1), "
"1)]"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "PWM"
          Show          on
          Position      [120, 120]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, 10]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, -10]
            Direction     left
          }
          Schematic {
            Location      [1617, 59; 2176, 375]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          ConfigurableSubsystem
              Name          "Carrier"
              Show          on
              Position      [215, 180]
              Direction     up
              Flipped       off
              Frame         [-20, -20; 20, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              MaskInit      "num_channel_1 = num_channel - 1;"
              Parameter {
                Variable      "num_channel"
                Prompt        "Number of channels"
                Type          FreeText
                Value         "numel(channel)"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "clk_cntr"
                Prompt        "Counter clock [s]"
                Type          FreeText
                Value         "Ts_fpga*(2^prscl)"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "update"
                Prompt        "Update"
                Type          FreeText
                Value         "update+1"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "prd_init"
                Prompt        "Norminal period"
                Type          FreeText
                Value         "prd"
                Show          off
                Tunable       off
                TabName       ""
              }
              Terminal {
                Type          Input
                Position      [-20, 10]
                Direction     left
              }
              Terminal {
                Type          Input
                Position      [-20, -10]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 10]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [24, -10]
                Direction     right
              }
              TerminalNames { "ph", "prd", "cntr", "sync" }
              Location      [759, 443; 1522, 1044]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Sawtooth"
                Schematic {
                  Component {
                    Type          Constant
                    Name          "Constant2"
                    Show          off
                    Position      [260, 100]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Integrator
                    Name          "Integrator1"
                    Show          off
                    Position      [390, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "ExternalReset"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "InitialConditionSource"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "x0"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "ShowStatePort"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "-inf"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "SaH"
                    Show          off
                    Position      [460, 170]
                    Direction     down
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                      Index         "1"
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "2"
                    }
                    Schematic {
                      Location      [415, 55; 662, 169]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [60, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [155, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [105, 30]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "3"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC"
                    Show          off
                    Position      [335, 210]
                    Direction     left
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Constant
                    Name          "Constant"
                    Show          off
                    Position      [335, 40]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "1/clk_cntr"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch"
                    Show          off
                    Position      [330, 120]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator1"
                    Show          off
                    Position      [385, 165]
                    Direction     right
                    Flipped       on
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator"
                    Show          off
                    Position      [330, 70]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [60, 120]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [540, 170]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [540, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Delays/Pulse Delay"
                    Name          "Pulse Delay"
                    Show          off
                    Position      [385, 210]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "T_d"
                      Value         "clk_cntr"
                      Show          off
                    }
                    Parameter {
                      Variable      "y_init"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "buffer_size"
                      Value         "1024"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum"
                    Show          off
                    Position      [160, 125]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "|-+"
                      Show          off
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC3"
                    Show          off
                    Position      [215, 210]
                    Direction     right
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [265, 210]
                    Direction     left
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [540, 120]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem"
                    Show          off
                    Position      [460, 120]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "0", "prd", "sync" }
                    Location      [1676, 670; 2079, 921]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "On carrier minimum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "Immediately"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant"
                          Show          off
                          Position      [175, 60]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier minimum/maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          LogicalOperator
                          Name          "Logical\nOperator"
                          Show          off
                          Position      [145, 60]
                          Direction     up
                          Flipped       off
                          Parameter {
                            Variable      "Operator"
                            Value         "2"
                            Show          off
                          }
                          Parameter {
                            Variable      "Inputs"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Logical\nOperator"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [100, 40; 100, 55]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [100, 80; 100, 65]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   3
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "update"
                      Show          off
                    }
                  }
                  Component {
                    Type          Product
                    Name          "Product2"
                    Show          off
                    Position      [115, 125]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation"
                    Show          off
                    Position      [210, 125]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem1"
                    Show          off
                    Position      [260, 65]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "In", "Out" }
                    Location      [1506, 634; 1947, 832]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "num_channel = 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [170, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [125, 75]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                      Name          "num_channel > 1"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "In"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "Out"
                          Show          on
                          Position      [220, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalSelector
                          Name          "Cont\nSelector"
                          Show          off
                          Position      [135, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "InputWidth"
                            Value         "1"
                            Show          off
                          }
                          Parameter {
                            Variable      "OutputIndices"
                            Value         "ones(num_channel_1,1)"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [180, 75]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "[1 num_channel_1]"
                            Show          off
                          }
                        }
                        Component {
                          Type          InitialCondition
                          Name          "IC2"
                          Show          off
                          Position      [135, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-15, -15; 15, 15]
                          LabelPosition [0, 18]
                          LabelAlign    up
                          Parameter {
                            Variable      "InitialValue"
                            Value         "1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant1"
                          Show          off
                          Position      [90, 50]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant1"
                          SrcTerminal   1
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "IC2"
                          SrcTerminal   2
                          Points        [160, 50; 160, 70]
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Cont\nSelector"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "In"
                          SrcTerminal   1
                          DstComponent  "Cont\nSelector"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "Out"
                          DstTerminal   1
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "(num_channel>1) + 1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   5
                    Points        [390, 45; 420, 45; 420, 160]
                    DstComponent  "Comparator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC"
                    SrcTerminal   2
                    DstComponent  "Pulse Delay"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse Delay"
                    SrcTerminal   1
                    Points        [460, 210]
                    DstComponent  "SaH"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant"
                    SrcTerminal   1
                    Points        [355, 40; 355, 60]
                    DstComponent  "Integrator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant2"
                    SrcTerminal   1
                    Points        [280, 100; 280, 115]
                    DstComponent  "Switch"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    DstComponent  "IC3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Product2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Product2"
                    SrcTerminal   1
                    DstComponent  "Sum"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator1"
                    SrcTerminal   3
                    Points        [360, 165]
                    Branch {
                      Points        [300, 165]
                      Branch {
                        DstComponent  "Logical\nOperator"
                        DstTerminal   3
                      }
                      Branch {
                        Points        [300, 210]
                        Branch {
                          DstComponent  "Cont\nSelector1"
                          DstTerminal   1
                        }
                        Branch {
                          DstComponent  "IC"
                          DstTerminal   1
                        }
                      }
                    }
                    Branch {
                      Points        [360, 130]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SaH"
                    SrcTerminal   2
                    Points        [420, 170]
                    Branch {
                      DstComponent  "Comparator1"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [420, 280; 80, 280; 80, 130]
                      DstComponent  "Product2"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    Points        [500, 170]
                    Branch {
                      DstComponent  "SaH"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [500, 240; 160, 240]
                      DstComponent  "Sum"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem"
                    SrcTerminal   3
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch"
                    SrcTerminal   1
                    Points        [350, 80]
                    DstComponent  "Integrator1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator"
                    SrcTerminal   1
                    DstComponent  "Integrator1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum"
                    SrcTerminal   1
                    DstComponent  "Saturation"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation"
                    SrcTerminal   2
                    DstComponent  "Switch"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem1"
                    SrcTerminal   2
                    Points        [290, 65]
                    Branch {
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [290, 155; 330, 155]
                      DstComponent  "Switch"
                      DstTerminal   4
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC3"
                    SrcTerminal   2
                    Points        [180, 210; 180, 65]
                    DstComponent  "Configurable\nSubsystem1"
                    DstTerminal   1
                  }
                }
                Name          "Symmetrical"
                Schematic {
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [65, 235]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [680, 395]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [680, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Constant
                    Name          "Constant"
                    Show          off
                    Position      [110, 165]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "1/clk_cntr"
                      Show          off
                    }
                  }
                  Component {
                    Type          Integrator
                    Name          "Integrator1"
                    Show          off
                    Position      [385, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "ExternalReset"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "InitialConditionSource"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "x0"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "ShowStatePort"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "-inf"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator2"
                    Show          off
                    Position      [460, 390]
                    Direction     right
                    Flipped       on
                  }
                  Component {
                    Type          Subsystem
                    Name          "SaH3"
                    Show          off
                    Position      [635, 395]
                    Direction     down
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                      Index         "1"
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "2"
                    }
                    Schematic {
                      Location      [415, 55; 662, 169]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [60, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [155, 60]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [105, 30]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "3"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Component {
                    Type          InitialCondition
                    Name          "IC2"
                    Show          off
                    Position      [500, 470]
                    Direction     left
                    Flipped       on
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, -18]
                    LabelAlign    down
                    Parameter {
                      Variable      "InitialValue"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Delays/Pulse Delay"
                    Name          "Pulse Delay2"
                    Show          off
                    Position      [550, 470]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "T_d"
                      Value         "clk_cntr"
                      Show          off
                    }
                    Parameter {
                      Variable      "y_init"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "buffer_size"
                      Value         "1024"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch1"
                    Show          off
                    Position      [210, 190]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain1"
                    Show          off
                    Position      [160, 195]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "-1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator3"
                    Show          off
                    Position      [460, 430]
                    Direction     left
                    Flipped       off
                  }
                  Component {
                    Type          Constant
                    Name          "Constant5"
                    Show          off
                    Position      [580, 435]
                    Direction     right
                    Flipped       on
                    Frame         [-10, -10; 10, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Value"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Logical/SR Flip-flop"
                    Name          "SR Flip-flop1"
                    Show          off
                    Position      [240, 405]
                    Direction     down
                    Flipped       on
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    Parameter {
                      Variable      "x_init"
                      Value         "0"
                      Show          off
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, -10]
                      Direction     right
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 10]
                      Direction     right
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain2"
                    Show          off
                    Position      [555, 395]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "K"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator"
                    Show          off
                    Position      [305, 385]
                    Direction     down
                    Flipped       on
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          LogicalOperator
                    Name          "Logical\nOperator1"
                    Show          off
                    Position      [305, 425]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Operator"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Comparator
                    Name          "Comparator4"
                    Show          off
                    Position      [395, 275]
                    Direction     up
                    Flipped       on
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch2"
                    Show          off
                    Position      [335, 350]
                    Direction     up
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch3"
                    Show          off
                    Position      [365, 350]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch4"
                    Show          off
                    Position      [270, 300]
                    Direction     down
                    Flipped       on
                    Parameter {
                      Variable      "Criteria"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum1"
                    Show          off
                    Position      [245, 355]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "-+"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain3"
                    Show          off
                    Position      [190, 395]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [485, 110]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Product
                    Name          "Product2"
                    Show          off
                    Position      [150, 240]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "Inputs"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [680, 260]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Configurable\nSubsystem"
                    Show          off
                    Position      [570, 260]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Input
                      Position      [-20, -10]
                      Direction     left
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 10]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    TerminalNames { "0", "prd", "sync" }
                    Location      [1968, 990; 2249, 1176]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "On carrier minimum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [135, 40; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "Immediately"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Constant
                          Name          "Constant"
                          Show          off
                          Position      [175, 60]
                          Direction     right
                          Flipped       off
                          Frame         [-10, -10; 10, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Value"
                            Value         "0"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Constant"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [135, 80; 135, 60]
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                      }
                      Name          "On carrier minimum/maximum"
                      Schematic {
                        Component {
                          Type          Input
                          Name          "0"
                          Show          on
                          Position      [60, 40]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "prd"
                          Show          on
                          Position      [60, 80]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "sync"
                          Show          on
                          Position      [220, 60]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "3"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          LogicalOperator
                          Name          "Logical\nOperator"
                          Show          off
                          Position      [145, 60]
                          Direction     up
                          Flipped       off
                          Parameter {
                            Variable      "Operator"
                            Value         "2"
                            Show          off
                          }
                          Parameter {
                            Variable      "Inputs"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Logical\nOperator"
                          SrcTerminal   1
                          DstComponent  "sync"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "0"
                          SrcTerminal   1
                          Points        [100, 40; 100, 55]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "prd"
                          SrcTerminal   1
                          Points        [100, 80; 100, 65]
                          DstComponent  "Logical\nOperator"
                          DstTerminal   3
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "update"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "PLECSRTBoxLib/PWM Out1/PWM/Carrier/Sawtooth"
"/Configurable\\nSubsystem1"
                    Name          "Configurable\nSubsystem1"
                    Show          off
                    Position      [340, 160]
                    Direction     right
                    Flipped       off
                    Frame         [-10, -20; 10, 20]
                    LabelPosition [-13, 0]
                    LabelAlign    right
                    Parameter {
                      Variable      "Configuration"
                      Value         "(num_channel>1) + 1"
                      Show          off
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch1"
                    SrcTerminal   1
                    DstComponent  "Integrator1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant5"
                    SrcTerminal   1
                    DstComponent  "Comparator3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain1"
                    SrcTerminal   2
                    DstComponent  "Switch1"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "IC2"
                    SrcTerminal   2
                    DstComponent  "Pulse Delay2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse Delay2"
                    SrcTerminal   1
                    Points        [635, 470]
                    DstComponent  "SaH3"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator"
                    SrcTerminal   1
                    Points        [280, 385; 280, 395]
                    DstComponent  "SR Flip-flop1"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Logical\nOperator1"
                    SrcTerminal   1
                    Points        [280, 425; 280, 415]
                    DstComponent  "SR Flip-flop1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch2"
                    SrcTerminal   1
                    DstComponent  "Logical\nOperator"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch3"
                    SrcTerminal   1
                    Points        [365, 420]
                    DstComponent  "Logical\nOperator1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain3"
                    SrcTerminal   2
                    Points        [190, 360]
                    DstComponent  "Sum1"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum1"
                    SrcTerminal   1
                    Points        [275, 355]
                    DstComponent  "Switch4"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   5
                    Points        [385, 175; 520, 175; 520, 385]
                    Branch {
                      Points        [520, 425]
                      DstComponent  "Comparator3"
                      DstTerminal   2
                    }
                    Branch {
                      DstComponent  "Comparator2"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator4"
                    SrcTerminal   3
                    Points        [395, 300]
                    Branch {
                      DstComponent  "Switch3"
                      DstTerminal   4
                    }
                    Branch {
                      Points        [305, 300]
                      Branch {
                        DstComponent  "Switch2"
                        DstTerminal   4
                      }
                      Branch {
                        DstComponent  "Switch4"
                        DstTerminal   4
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator1"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch4"
                    SrcTerminal   1
                    Points        [270, 210]
                    DstComponent  "Integrator1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SR Flip-flop1"
                    SrcTerminal   3
                    Points        [210, 395]
                    DstComponent  "Switch1"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Product2"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    DstComponent  "SaH3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Product2"
                    SrcTerminal   1
                    Points        [190, 240]
                    Branch {
                      Points        [390, 240]
                      DstComponent  "Comparator4"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [190, 330]
                      Branch {
                        DstComponent  "Switch4"
                        DstTerminal   3
                      }
                      Branch {
                        Points        [190, 350]
                        DstComponent  "Sum1"
                        DstTerminal   2
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem"
                    SrcTerminal   3
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain2"
                    SrcTerminal   2
                    Points        [530, 395]
                    Branch {
                      DstComponent  "Comparator2"
                      DstTerminal   2
                    }
                    Branch {
                      Points        [530, 450; 190, 450]
                      DstComponent  "Gain3"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [530, 240; 400, 240]
                      DstComponent  "Comparator4"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "SaH3"
                    SrcTerminal   2
                    Points        [600, 395]
                    Branch {
                      DstComponent  "Gain2"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [600, 520; 115, 520; 115, 245]
                      DstComponent  "Product2"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Constant"
                    SrcTerminal   1
                    Points        [130, 165]
                    Branch {
                      DstComponent  "Gain1"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [175, 165; 175, 185]
                      DstComponent  "Switch1"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator3"
                    SrcTerminal   3
                    Points        [420, 430]
                    Branch {
                      Points        [365, 430]
                      Branch {
                        DstComponent  "Logical\nOperator1"
                        DstTerminal   2
                      }
                      Branch {
                        Points        [365, 470]
                        Branch {
                          DstComponent  "IC2"
                          DstTerminal   1
                        }
                        Branch {
                          Points        [365, 510; 610, 510; 610, 110]
                          DstComponent  "Cont\nSelector1"
                          DstTerminal   1
                        }
                      }
                    }
                    Branch {
                      Points        [420, 250]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Comparator2"
                    SrcTerminal   3
                    Points        [430, 390]
                    Branch {
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                    Branch {
                      Points        [430, 270]
                      DstComponent  "Configurable\nSubsystem"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Configurable\nSubsystem1"
                    SrcTerminal   2
                    Points        [340, 200]
                    Branch {
                      DstComponent  "Integrator1"
                      DstTerminal   3
                    }
                    Branch {
                      Points        [340, 310]
                      Branch {
                        Points        [370, 310]
                        DstComponent  "Switch3"
                        DstTerminal   2
                      }
                      Branch {
                        DstComponent  "Switch2"
                        DstTerminal   3
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    Points        [340, 110]
                    DstComponent  "Configurable\nSubsystem1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "type+1"
                Show          off
              }
            }
            Component {
              Type          Product
              Name          "Divide"
              Show          off
              Position      [130, 155]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "Inputs"
                Value         "*/"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant3"
              Show          off
              Position      [75, 170]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "prd"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum"
              Show          off
              Position      [85, 110]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          off
              Position      [65, 80]
              Direction     left
              Flipped       on
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              Parameter {
                Variable      "Value"
                Value         "offset"
                Show          off
              }
            }
            Component {
              Type          Gain
              Name          "Gain1"
              Show          off
              Position      [130, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "gain_offline"
                Show          off
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Product
              Name          "Product2"
              Show          off
              Position      [190, 115]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Configurable\nSubsystem"
              Show          off
              Position      [245, 115]
              Direction     up
              Flipped       on
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              SampleTime    "-1"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-20, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [0, -10]
                Direction     up
              }
              TerminalNames { "mi", "mo", "sync1" }
              Location      [883, 1003; 1288, 1239]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Edge triggered"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          CScript
                    Name          "Vectroised\nTrigger"
                    Show          on
                    Position      [165, 75]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "NumInputs"
                      Value         "num_channel*2"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumOutputs"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumContStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumDiscStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumZCSignals"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DirectFeedthrough"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Ts"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "Parameters"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "LangStandard"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "GnuExtensions"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "RuntimeCheck"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Declarations"
                      Value         "#include <stdlib.h>\n#include <math.h>\n#"
"include <string.h>\n#include <limits.h>\n#include <float.h>\n\nstatic int num"
"_channel;\nstatic int* sync_pre;"
                      Show          off
                    }
                    Parameter {
                      Variable      "StartFcn"
                      Value         "num_channel = ParamRealData(0,0);\nsync_p"
"re = (int*) malloc(num_channel*sizeof(int));"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputFcn"
                      Value         "if(IsMajorStep)\n{\n\tfor(int id = 0; id "
"< num_channel; id++)\n\t{\n\t\tif(Input(id) == 1 && sync_pre[id] == 0)\n\t\t{"
"\n\t\t\tOutput(id) = Input(num_channel+id);\n\t\t}\n\t\tsync_pre[id] = Input("
"id);\n\t}\n}"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpdateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "DerivativeFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "TerminateFcn"
                      Value         ""
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [110, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[num_channel num_channel]"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Vectroised\nTrigger"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Vectroised\nTrigger"
                    SrcTerminal   2
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "sync1"
                    SrcTerminal   1
                    Points        [90, 40; 90, 70]
                    DstComponent  "Mux"
                    DstTerminal   2
                  }
                }
                Name          "Natural"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "(update==1)+1"
                Show          off
              }
            }
            Component {
              Type          ConstantRelationalOperator
              Name          "Compare to\nConstant"
              Show          off
              Position      [95, 215]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum1"
              Show          off
              Position      [130, 190]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "sw"
              Show          on
              Position      [525, 190]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "ph'"
              Show          on
              Position      [40, 190]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "fc'"
              Show          on
              Position      [40, 150]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "m"
              Show          on
              Position      [40, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Comparator
              Name          "Comparator"
              Show          off
              Position      [310, 185]
              Direction     right
              Flipped       off
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Delays/Turn-on Delay"
              Name          "Turn-on Delay1"
              Show          off
              Position      [470, 190]
              Direction     up
              Flipped       on
              Frame         [-15, -15; 15, 15]
              LabelPosition [0, -18]
              LabelAlign    down
              Parameter {
                Variable      "T_d"
                Value         "delay_sec"
                Show          off
              }
              Terminal {
                Type          Input
                Position      [-15, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [19, 0]
                Direction     right
              }
            }
            Component {
              Type          Constant
              Name          "Constant1"
              Show          off
              Position      [435, 225]
              Direction     right
              Flipped       on
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "polar"
                Show          off
              }
            }
            Component {
              Type          SignalSwitch
              Name          "Switch"
              Show          off
              Position      [405, 190]
              Direction     left
              Flipped       on
              Parameter {
                Variable      "Criteria"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant4"
              Show          off
              Position      [335, 225]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum2"
              Show          off
              Position      [360, 200]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|-+"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum1"
              SrcTerminal   1
              DstComponent  "Carrier"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   4
              Points        [245, 170]
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Divide"
              SrcTerminal   1
              Points        [155, 155]
              Branch {
                Points        [155, 120]
                DstComponent  "Product2"
                DstTerminal   2
              }
              Branch {
                Points        [155, 170]
                DstComponent  "Carrier"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant3"
              SrcTerminal   1
              Points        [95, 170; 95, 160]
              DstComponent  "Divide"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum"
              SrcTerminal   1
              DstComponent  "Gain1"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [85, 80]
              DstComponent  "Sum"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Gain1"
              SrcTerminal   2
              DstComponent  "Product2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Product2"
              SrcTerminal   1
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Compare to\nConstant"
              SrcTerminal   2
              DstComponent  "Sum1"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "ph'"
              SrcTerminal   1
              Points        [60, 190]
              Branch {
                DstComponent  "Compare to\nConstant"
                DstTerminal   1
              }
              Branch {
                DstComponent  "Sum1"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "fc'"
              SrcTerminal   1
              DstComponent  "Divide"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "m"
              SrcTerminal   1
              DstComponent  "Sum"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant1"
              SrcTerminal   1
              Points        [405, 225]
              DstComponent  "Switch"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Switch"
              SrcTerminal   1
              DstComponent  "Turn-on Delay1"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant4"
              SrcTerminal   1
              DstComponent  "Sum2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum2"
              SrcTerminal   1
              DstComponent  "Switch"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Comparator"
              SrcTerminal   3
              Points        [335, 185]
              Branch {
                DstComponent  "Switch"
                DstTerminal   3
              }
              Branch {
                DstComponent  "Sum2"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Configurable\nSubsystem"
              SrcTerminal   2
              Points        [275, 115; 275, 180]
              DstComponent  "Comparator"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   3
              DstComponent  "Comparator"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Turn-on Delay1"
              SrcTerminal   2
              DstComponent  "sw"
              DstTerminal   1
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Constant4"
          SrcTerminal   1
          DstComponent  "PWM"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          Points        [80, 110]
          DstComponent  "PWM"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "Constant5"
          SrcTerminal   1
          Points        [80, 160; 80, 130]
          DstComponent  "PWM"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "PWM"
          SrcTerminal   1
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Capture1"
      Show          on
      Position      [80, 380]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices ""
      CodeFcn       "Include(\"DataCapture.h\");\n\nint width = NumInputSignal"
"s(0);\nint numSamples = MaskRealData(MASK_VAR_num_samples, 0);\nint triggerTy"
"pe = MaskRealData(MASK_VAR_trigger_type, 0);\ndouble triggerLevel = MaskRealD"
"ata(MASK_VAR_trigger_level, 0);\nconst char* componentPath = MaskStringData(M"
"ASK_VAR_path);\nint instance = 0;\n\nif (numSamples * width > 8192)\n{\n  sta"
"tic char errorMsg[200];\n  sprintf(errorMsg, \"The total number of samples, c"
"alculated as 'Number of samples' (%d) * 'Signal width' (%d),\"\n  \"must not "
"be larger than 8192.\", numSamples, width);\n  SetErrorStatus(errorMsg);\n  r"
"eturn;\n}\n\nint len = strlen(TargetStringData(TARGET_VAR_BUILD_ROOT)) + 1 + "
"strlen(\"DataCaptureDefs.h\");\nchar *filenameBuffer = malloc((len+1) * sizeo"
"f(char));\nif (filenameBuffer)\n{\n  sprintf(filenameBuffer, \"%s/%s\", Targe"
"tStringData(TARGET_VAR_BUILD_ROOT), \"DataCaptureDefs.h\");\n  FILE *fp = fop"
"en(filenameBuffer, \"r+\");\n  free (filenameBuffer);\n  if (fp != NULL)\n  {"
"\n     fscanf(fp, \"#define NUM_DATA_CAPTURE_BLOCKS %d\", &instance);\n     r"
"ewind(fp);\n     fprintf(fp, \"#define NUM_DATA_CAPTURE_BLOCKS %d\\n\", insta"
"nce+1);\n     fclose(fp);\n  }\n  else\n  {\n     SetErrorStatus(\"Fatal erro"
"r: Could not open \\\"DataCaptureDefs.h\\\" for reading/writing.\");\n     re"
"turn;\n  }\n}\nelse\n{\n  SetErrorStatus(\"Fatal error: Could not allocate me"
"mory for filename buffer.\");\n  return;\n}\n\n\nPrint(InitCode, \"{ static d"
"ouble dataBuffer[2][%i];\", numSamples * width);\nPrint(InitCode, \"plxSetupD"
"ataCapture(%i, \\\"%s\\\", %i, %i, dataBuffer, %i, %.17e);\\n}\", \n      ins"
"tance, componentPath, width, numSamples, triggerType, triggerLevel);\nPrint(O"
"utputCode, \"{ double data[] = {\");\nfor (int i=0; i<width; i++)\n{\n   Prin"
"t(OutputCode, \"%s\", InputSignal(0, i));\n   if (i < width-1)\n      Print(O"
"utputCode, \",\");\n}\nPrint(OutputCode, \"};\\n\");\nPrint(OutputCode, \"plx"
"UpdateDataCapture(%i, %s, data);\\n\", instance, InputSignal(1, 0));\nPrint(O"
"utputCode, \"}\");"
      MaskType      "Data Capture"
      MaskDescription "Capture data to be transferred via XML-RPC."
      MaskHelp      "data_capture_rtbox.html"
      MaskDisplay   "text(['Data' char(10) 'Capture'])\nline([-2 0 0 2], [-11,"
" -11, -17, -17])\nline([-2 0 2], [-13, -15, -13])"
      MaskIconFrame on
      MaskIconOpaque on
      MaskIconRotates on
      MaskInit      "curComp = plecs('get','','CurrentComponent');\ncurPath = "
"plecs('get','','CurrentCircuit');\npath=curComp(length(curPath)+2:end);\n\nif"
" (~isreal(num_samples) || floor(num_samples) ~= num_samples || num_samples < "
"0)\n    error('\"Number of samples\" must be a scalar positive integer.');\ne"
"nd\n\nif (~isreal(trigger_level))\n    error('\"Trigger level\" must be scala"
"r.');\nend\n"
      Parameter {
        Variable      "num_samples"
        Prompt        "Number of samples"
        Type          FreeText
        Value         "50"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "trigger_type"
        Prompt        "Trigger type"
        Type          FixedText
        PossibleValues {"rising", "falling", "either", "continuous"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "trigger_level"
        Prompt        "Trigger level"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [0, -20]
        Direction     up
      }
      Schematic {
        Location      [1117, 319; 2344, 528]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [55, 85]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In2"
          Show          on
          Position      [55, 45]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Value1"
      Show          on
      Position      [380, 60]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices ""
      CodeFcn       "Include(\"ProgrammableValue.h\");\n\nint width = MaskReal"
"Data(MASK_VAR_width, 0);\nconst char* componentPath = MaskStringData(MASK_VAR"
"_path);\nint instance = 0;\n\nint len = strlen(TargetStringData(TARGET_VAR_BU"
"ILD_ROOT)) + 1 + strlen(\"ProgrammableValueDefs.h\");\nchar *filenameBuffer ="
" malloc((len+1) * sizeof(char));\nif (filenameBuffer)\n{\n  sprintf(filenameB"
"uffer, \"%s/%s\", TargetStringData(TARGET_VAR_BUILD_ROOT), \"ProgrammableValu"
"eDefs.h\");\n  FILE *fp = fopen(filenameBuffer, \"r+\");\n  free (filenameBuf"
"fer);\n  if (fp != NULL)\n  {\n     fscanf(fp, \"#define NUM_PROGRAMMABLE_VAL"
"UE_BLOCKS %d\", &instance);\n     rewind(fp);\n     fprintf(fp, \"#define NUM"
"_PROGRAMMABLE_VALUE_BLOCKS %d\\n\", instance+1);\n     fclose(fp);\n  }\n  el"
"se\n  {\n     SetErrorStatus(\"Fatal error: Could not open \\\"ProgrammableVa"
"lueDefs.h\\\" for reading/writing.\");\n     return;\n  }\n}\nelse\n{\n  SetE"
"rrorStatus(\"Fatal error: Could not allocate memory for filename buffer.\");"
"\n  return;\n}\n\n\nPrint(InitCode, \"{ static double programmableValueInitDa"
"ta[] = {\\n\");\nfor (int i = 0; i < width; ++i)\n{\n   Print(InitCode, \"%.1"
"7e\", MaskRealData(MASK_VAR_default, i));\n   if (i < width - 1)\n      Print"
"(InitCode, \",\");\n}\nPrint(InitCode, \"};\\n\");\n\nPrint(InitCode, \"plxSe"
"tupProgrammableValue(%i, \\\"%s\\\", %i, programmableValueInitData);\\n}\", "
"\n      instance, componentPath, width);\n\nfor (int i = 0; i < width; ++i)\n"
"{\n   Print(OutputSignal(0, i), \"plxGetProgrammableValueData(%i, %i)\", inst"
"ance, i);\n}\n"
      MaskType      "Programmable Value"
      MaskDescription "Output values received via the XML-RPC interface."
      MaskHelp      "prog_value_rtbox.html"
      MaskDisplay   "text(['Prog.' char(10) 'Value'])"
      MaskIconFrame on
      MaskIconOpaque on
      MaskIconRotates on
      MaskInit      "curComp = plecs('get','','CurrentComponent');\ncurPath = "
"plecs('get','','CurrentCircuit');\npath=curComp(length(curPath)+2:end);\n\nif"
" ~isreal(default) || ~isvector(default),\n  error('\"Initial value\" must be "
"a real scalar or vector.')\nend\n\nif numel(default) == 1,\n  default = repma"
"t(default, width);\nelseif numel(default) ~= width,\n  error(['\"Initial valu"
"e\" must be scalar or a vector with length ' num2str(width) '.']);\nend\n\nif"
" (~isreal(width) || floor(width) ~= width || width <= 0)\n    error('\"Width"
"\" must be a scalar positive integer.');\nend\n\nif (width > 8192)\n    error"
"('\"Width\" must not be larger than 8192.');\nend\n"
      Parameter {
        Variable      "width"
        Prompt        "Width"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "default"
        Prompt        "Initial value"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [285, 126; 1390, 270]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [305, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "width"
            Show          off
          }
        }
        Component {
          Type          Constant
          Name          "Constant"
          Show          on
          Position      [205, 55]
          Direction     right
          Flipped       off
          Frame         [-25, -10; 25, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Value"
            Value         "default"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Constant"
          SrcTerminal   1
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "SPI Master"
      Show          on
      Position      [80, 470]
      Direction     up
      Flipped       off
      Frame         [-25, -30; 25, 30]
      LabelPosition [0, 33]
      LabelAlign    up
      TargetPortIndices "5 7 6 7 8 8 9 10 9"
      CodeFcn       "Include(\"SPI.h\");\n\nint moduleID = MaskRealData(MASK_V"
"AR_moduleID, 0)-1;\n\n// register the hardware resources\nRequire(\"SPI maste"
"r\", moduleID);\n\ndouble transferTime = MaskRealData(MASK_VAR_t_trans, 0);\n"
"\nif (transferTime > TargetRealData(TARGET_VAR_SAMPLE_TIME, 0))\n{\n   static"
" char errorMessage[] = \"Error in SPI module SPIx: Data transmission time is "
"longer than model step size.\";\n   errorMessage[23] = 49+moduleID;\n   SetEr"
"rorStatus(errorMessage);\n}\n\n//Setup Config struct\nPrint(InitCode, \"{\\n"
"\");\nPrint(InitCode, \"const SPI_CONF conf = {\\n\"); \nPrint(InitCode, \".S"
"_MODE = 0,\\n\");\nPrint(InitCode, \".CLK_SPC1 = %i,\\n\", (int)MaskRealData("
"MASK_VAR_ticksSetupCS, 0));\nPrint(InitCode, \".CLK_SPC2 = %i,\\n\", (int)Mas"
"kRealData(MASK_VAR_ticksHoldCS, 0));\nPrint(InitCode, \".SPIMODE = %i,\\n\", "
"(int)MaskRealData(MASK_VAR_spiMode, 0)-1);\nPrint(InitCode, \".DataBits = %i,"
"\\n\", (int)MaskRealData(MASK_VAR_wordSize, 0));\nPrint(InitCode, \".bitOrder"
" = %i,\\n\", (int)MaskRealData(MASK_VAR_bitOrder, 0)-1);\nPrint(InitCode, \"."
"HS_MODE = %i,\\n\", (int)MaskRealData(MASK_VAR_useClockInput, 0)-1);\nPrint(I"
"nitCode, \".STREAM = 1,\\n\");\nPrint(InitCode, \".STRMBR = %i,\\n\", (int)Ma"
"skRealData(MASK_VAR_numChannels, 0)-1);\nPrint(InitCode, \".CSACTIVE = 0,\\n"
"\");\nPrint(InitCode, \".TRGDELAY = 0\\n\");\nPrint(InitCode, \"};\\n\");\n//"
"Setup SPI moduleID for Master Mode with numWords sent words per channel\nPrin"
"t(InitCode, \"setupSPI(%i, &conf, %.17e,%i,0,0);\\n\", moduleID, MaskRealData"
"(MASK_VAR_fClock, 0), (int)MaskRealData(MASK_VAR_numWords, 0));\nPrint(InitCo"
"de, \"}\\n\");\n\nPrint(InitCode, \"plxtTransSPI%i = %.17e;\\n\", moduleID, t"
"ransferTime);\nPrint(InitCode, \"plxDelaySPI%i = %.17e;\\n\", moduleID, MaskR"
"ealData(MASK_VAR_tDelayCS, 0));\nPrint(InitCode, \"plxTrigModeSPI%i = %i;\\n"
"\", moduleID, (int)MaskRealData(MASK_VAR_delayCSMode, 0)-1);\n\n//Program Inp"
"uts in Init Code\nfor (int i = 0; i < 8; i++)\n{\n   int channel = MaskRealDa"
"ta(MASK_VAR_inputVec, i);\n   \n\tif(channel < 32)\n\t{\n\t\t//Input configur"
"ed to be used for SPI   \t\t\n   \t\tRequire(\"Digital input\", channel);\n  "
" \t\tPrint(InitCode, \"setupSPIInput(%i,%i, %i);\\n\", moduleID, i, channel);"
"\n   \t}\n}\n\n//Program CLK output channels\nfor (int i = 0; i < (int)MaskRe"
"alData(MASK_VAR_clkoutVecL,0); i++)\n{\n   int channel = MaskRealData(MASK_VA"
"R_clkoutVec, i);\n   \n\t//Output configured to be used for SPI   \t\t\n\tReq"
"uire(\"Digital output\", channel);\n   \tPrint(InitCode, \"setupSPIOutput(%i,"
"0, %i);\\n\", moduleID, channel);\n}\n\n//Program CS output channels\nfor (in"
"t i = 0; i < (int)MaskRealData(MASK_VAR_csoutVecL,0); i++)\n{\n   int channel"
" = MaskRealData(MASK_VAR_csoutVec, i);\n   \n\t//Output configured to be used"
" for SPI   \t\t\n\tRequire(\"Digital output\", channel);\n   \tPrint(InitCode"
", \"setupSPIOutput(%i,2, %i);\\n\", moduleID,channel);\n}\n\n\n//Program digi"
"tal output channels\nint outid[4] = {1,3,4,5};\nfor (int i = 0; i < (int)Mask"
"RealData(MASK_VAR_numChannels,0); i++)\n{\n   int channel = MaskRealData(MASK"
"_VAR_outputVec, i);\n   \n\t//Output configured to be used for SPI   \t\t\n\t"
"Require(\"Digital output\", channel);\n   \tPrint(InitCode, \"setupSPIOutput("
"%i,%i, %i);\\n\", moduleID,outid[i],channel);\n}\n\n//SPI Outgoing Data  \t "
"\nint id = 0;\nfor (int i = 0; i < (int)MaskRealData(MASK_VAR_numWords, 0); i"
"++)\n{      \n\tfor(int j = 0; j < (int)MaskRealData(MASK_VAR_numChannels, 0)"
"; j++)\n\t{\t\t\n\t\t//SPI Outgoing Data   \t\t\n   \t\tPrint(OutputCode, \"s"
"etSPIOut%i(%i, %s);\\n\", moduleID, id, InputSignal(j, i));\t\n   \t\tid++;\n"
"\t}\t\n}\n\n//SPI Incoming Data\nfor(int i = 0; i < 4; i++)\n{\n\t//for each "
"of the four outputs\n\tfor(int j = 0; j < NumOutputSignals(i); j++)\n\t{\n\t"
"\tif(i < (int)MaskRealData(MASK_VAR_numChannels, 0) && j < (int)MaskRealData("
"MASK_VAR_numWords, 0))\n\t\t{\n\t\t\t//Output is member of the incoming data "
"stream\n\t\t\tPrint(OutputSignal(i,j), \"getSPIIn%i(%i)\", moduleID, i+j*(int"
")MaskRealData(MASK_VAR_numChannels, 0));\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t"
"\tPrint(OutputSignal(i, j), \"0\");\n\t\t}\n\t}\n}\n\nPrint(OutputSignal(4, 0"
"), \"getSPIInputState%i()\", moduleID);"
      MaskType      "SPI Master"
      MaskDescription "Implement SPI communication via digital outputs/inputs."
" One slave can have up to four parallel data channels."
      MaskHelp      "spimaster_rtbox.html"
      MaskDisplay   "text(['SPI' char(10) 'Master'])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if moduleID ~= 1 && moduleID ~= 2,\n  error('\"SPI module"
"ID\" must be 1 or 2.');\nend\n\n% Set number of bits\nif wordSize == 1\n\twor"
"dSize = 8;\nelse\n\twordSize = 16;\nend\n\n% Rematch SPI Mode\nmodevec = [3,1"
",4,2];\nspiMode = modevec(spiMode);\n\n% Sequence validity check\nif (~isreal"
"(numWords) || floor(numWords) ~= numWords || numWords < 1 || numWords > 127 |"
"| ~isscalar(numWords))\n  \terror('\"Words per transmission\" must be a scala"
"r, positive integer < 128.')\nend\n\nif (~isreal(fClock) || ~isscalar(fClock)"
" || any(floor(fClock) ~= fClock) || any(fClock < 10e3) || any(fClock > 40e6))"
"\n\terror('\"SPI clock frequency\" must be a scalar, positive double in range"
" [10e3 ... 40e6] Hz.');\nend\n\nif (ticksSetupCS < 1 || ticksSetupCS > 15 || "
"any(floor(ticksSetupCS) ~= ticksSetupCS))\n\terror('\"Delay first clock pulse"
" after CS active [ticks]\" needs to be an integer in range [1 ... 15]');\nend"
"\nif (ticksHoldCS < 1 || ticksHoldCS > 15 || any(floor(ticksHoldCS) ~= ticksH"
"oldCS))\n\terror('\"Keep CS active after last clock pulse [ticks]\" needs to "
"be an integer in range [1 ... 15]');\nend\n\n%Aproximate expected transmissio"
"n time\nt_trans = (ticksSetupCS+ticksHoldCS+numWords*wordSize)/fClock;\n\n% C"
"heck Delay Config\nif (delayCSMode > 2 && (~isreal(tDelayCS) || ~isscalar(tDe"
"layCS) || any(tDelayCS < 0)))\n\terror('\"CS delay time\" must be a scalar va"
"lue >= 0.');\nend\n\n\n\n% Check input channel config\nif (any(~isreal(dataIn"
"Channel)) || any(floor(dataInChannel) ~= dataInChannel) || any(dataInChannel "
"< -1) || length(dataInChannel) ~= numChannels)\n\terror(['\"Digital input cha"
"nnel(s) for SPI data\" must be a vector with '  num2str(numChannels) ' intege"
"r elements >= -1.']);\nelseif (~isreal(clkInChannel) || ~isscalar(clkInChanne"
"l) || any(floor(clkInChannel) ~= clkInChannel) || any(clkInChannel < -1))\n  "
"\terror('\"Digital input channel for skew-matched SPI clock\" must be a scala"
"r integer >= -1.');\nelse\n\t%write input vector\n\tinputVec = 32*ones(1,8);"
"\n\tfor i = 1 : numChannels\n\t\tif(dataInChannel(i) ~= -1)\n\t\t\tinputVec(i"
") = dataInChannel(i)\t;\t\t\n\t\tend\t\n\tend\n\tif(clkInChannel ~= -1 && use"
"ClockInput == 2)\n\t\tinputVec(5) = clkInChannel;\n\tend\nend\n\n% Clock chan"
"nel/s, always used\nif (~isreal(clkOutChannel) || ~isvector(clkOutChannel) ||"
" any(floor(clkOutChannel) ~= clkOutChannel) || any(clkOutChannel < -1))\n  \t"
"error('\"Digital output channel for SPI clock\" must be a scalar or vector of"
" integers >= -1.');\nelse\n\tclkoutVec = clkOutChannel(clkOutChannel ~= -1);%"
"removes all -1 configurations\n\tclkoutVecL = length(clkoutVec);\nend\n\n% CS"
" channel/s, always used\nif (~isreal(csOutChannel) || ~isvector(csOutChannel)"
" || any(floor(csOutChannel) ~= csOutChannel) || any(csOutChannel < -1))\n  \t"
"error('\"Digital output channel for CS\" must be a scalar or vector of intege"
"rs >= -1.');\nelse\n\tcsoutVec = csOutChannel(csOutChannel ~= -1);\n\tcsoutVe"
"cL = length(csoutVec);\nend\n\n% Data channels\nif (any(~isreal(dataOutChanne"
"l)) || any(floor(dataOutChannel) ~= dataOutChannel) || any(dataOutChannel < -"
"1) || length(dataOutChannel) ~= numChannels)\n\terror(['\"Digital output chan"
"nel(s) for SPI data\" must be a vector with '  num2str(numChannels) ' integer"
" elements >= -1.']);\nelse\n\t%write output vector\n\toutputVec = 32*ones(1,n"
"umChannels);\n\tfor i = 1 : numChannels\n\t\tif(dataInChannel(i) ~= -1)\n\t\t"
"\toutputVec(i) = dataOutChannel(i);\t\t\n\t\tend\t\n\tend\nend\n\n\n\ninpwidt"
"h = ones(1,4);\n%set expected signal width for inputs\nfor i = 1:numChannels"
"\n\tinpwidth(i) = numWords;\nend\n\n"
      Parameter {
        Variable      "moduleID"
        Prompt        "SPI module"
        Type          FixedText
        PossibleValues {"SPI1", "SPI2"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "fClock"
        Prompt        "SPI clock frequency [Hz]"
        Type          FreeText
        Value         "10e6"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "ticksSetupCS"
        Prompt        "Delay first clock pulse after CS active [ticks]"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "ticksHoldCS"
        Prompt        "Hold CS active after last clock pulse [ticks]"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "delayCSMode"
        Prompt        "Delay CS after simulation step"
        Type          FixedText
        PossibleValues {"Minimum", "Maximum", "Specify delay time"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "tDelayCS"
        Prompt        "CS delay time [s]"
        Type          FreeText
        Value         "0.5e-6"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "spiMode"
        Prompt        "Mode [CPOL, CPHA]"
        Type          FixedText
        PossibleValues {"0 - [0, 0]", "1 - [0, 1]", "2 - [1, 0]", "3 - [1, 1]"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "wordSize"
        Prompt        "Bits per word"
        Type          FixedText
        PossibleValues {"8", "16"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "bitOrder"
        Prompt        "Bit order"
        Type          FixedText
        PossibleValues {"MSB first", "LSB first"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "useClockInput"
        Prompt        "Skew-matched clock input"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "numChannels"
        Prompt        "Number of parallel data channels"
        Type          FixedText
        PossibleValues {"1", "2", "3", "4"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "numWords"
        Prompt        "Words per transmission (up to 127)"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Setup"
      }
      Parameter {
        Variable      "clkInChannel"
        Prompt        "Digital input channel for skew-matched SPI clock"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "dataInChannel"
        Prompt        "Digital input channel(s) for SPI data"
        Type          FreeText
        Value         "[2]"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "clkOutChannel"
        Prompt        "Digital output channel for SPI clock"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "csOutChannel"
        Prompt        "Digital output channel for CS"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "dataOutChannel"
        Prompt        "Digital output channel(s) for SPI data"
        Type          FreeText
        Value         "[2]"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Terminal {
        Type          Input
        Position      [-25, -15]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [29, -20]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-25, -5]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 5]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 15]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [29, -10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 20]
        Direction     right
      }
      Schematic {
        Location      [1067, 134; 2560, 833]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [50, 80]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "inpwidth(1)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [145, 210]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In2"
          Show          off
          Position      [50, 105]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "inpwidth(2)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In3"
          Show          off
          Position      [50, 130]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "4"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "inpwidth(3)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In4"
          Show          off
          Position      [50, 155]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "5"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "inpwidth(4)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out2"
          Show          off
          Position      [145, 235]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "6"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out3"
          Show          off
          Position      [145, 260]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "7"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out4"
          Show          off
          Position      [145, 285]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "8"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [50, 210]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "inpwidth(1)"
            Show          off
          }
        }
        Component {
          Type          TargetOutput
          Name          "5"
          Show          on
          Position      [145, 80]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "2"
          Show          on
          Position      [50, 235]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "inpwidth(2)"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "3"
          Show          on
          Position      [50, 260]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "inpwidth(3)"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "4"
          Show          on
          Position      [50, 285]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "inpwidth(4)"
            Show          off
          }
        }
        Component {
          Type          TargetOutput
          Name          "6"
          Show          on
          Position      [145, 105]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetOutput
          Name          "7"
          Show          on
          Position      [145, 130]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetOutput
          Name          "8"
          Show          on
          Position      [145, 155]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "valid"
          Show          on
          Position      [145, 325]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "9"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "9"
          Show          on
          Position      [50, 325]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "inpwidth(4)"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "3"
          SrcTerminal   1
          DstComponent  "Out3"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "2"
          SrcTerminal   1
          DstComponent  "Out2"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Out1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "4"
          SrcTerminal   1
          DstComponent  "Out4"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In4"
          SrcTerminal   1
          DstComponent  "8"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In3"
          SrcTerminal   1
          DstComponent  "7"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In2"
          SrcTerminal   1
          DstComponent  "6"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "5"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "9"
          SrcTerminal   1
          DstComponent  "valid"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Counter1"
      Show          on
      Position      [380, 140]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "10"
      CodeFcn       "Include(\"EncoderCounter.h\");\n\nint instance = MaskReal"
"Data(MASK_VAR_instance, 0);\nunsigned int max_counter_value = MaskRealData(MA"
"SK_VAR_max_counter_value, 0);\nint counter_mode = MaskRealData(MASK_VAR_count"
"er_mode, 0);\nint direction = MaskRealData(MASK_VAR_direction, 0);\nint count"
"er_reset_type = MaskRealData(MASK_VAR_counter_reset_type, 0);\nint input_type"
" = MaskRealData(MASK_VAR_input_type, 0);\nint index_enable = MaskRealData(MAS"
"K_VAR_has_index, 0);\nint input_a = MaskRealData(MASK_VAR_input_a, 0);\nint i"
"nput_b = MaskRealData(MASK_VAR_input_b, 0);\nint input_i = MaskRealData(MASK_"
"VAR_input_i, 0);\nint input_na = MaskRealData(MASK_VAR_input_na, 0);\nint inp"
"ut_nb = MaskRealData(MASK_VAR_input_nb, 0);\nint input_ni = MaskRealData(MASK"
"_VAR_input_ni, 0);\n\nRequire(\"Encoder counter\", instance-1);\nRequire(\"Di"
"gital input\", input_a);\nRequire(\"Digital input\", input_b);\nif (index_ena"
"ble == 2)\n   Require(\"Digital input\", input_i);\nif (input_type == 2) // d"
"ifferential\n{\n   Require(\"Digital input\", input_na);\n   Require(\"Digita"
"l input\", input_nb);\n   if (index_enable == 2)\n      Require(\"Digital inp"
"ut\", input_ni);\n}\n\nPrint(InitCode, \"plxSetupEncoderCounter(%i, %i, %i, %"
"i, %i, %i, %i, %i, %i, %i, %i, %i, %i, %.17ef);\\n\", \n   instance-1, max_co"
"unter_value, counter_mode-1, direction-1, counter_reset_type-1,\n   input_typ"
"e-1, index_enable-1, input_a, input_b, input_i, input_na, input_nb, input_ni,"
"\n   TargetRealData(TARGET_VAR_SAMPLE_TIME, 0)); \nPrint(OutputSignal(0,0), "
"\"plxGetEncoderCounter(%i)\", instance-1);\nPrint(OutputSignal(1,0), \"plxGet"
"EncoderSpeed(%i)\", instance-1);\nPrint(OutputSignal(2,0), \"plxGetEncoderDir"
"ection(%i)\", instance-1);\nPrint(OutputSignal(2,1), \"plxGetEncoderIndex(%i)"
"\", instance-1);\nPrint(UpdateCode, \"plxLastEncoderCounterValues[%i] = plxGe"
"tEncoderCounter(%i);\\n\", instance-1, instance-1);\n"
      MaskType      "Quadrature Encoder Counter"
      MaskDescription "Counts edges generated from a quadrature encoder."
      MaskHelp      "encoder_counter_rtbox.html"
      MaskDisplay   "text(['Enc.' char(10) 'Count '])"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      MaskInit      "if instance ~= 1 && instance ~= 2,\n   error('Parameter "
"\"Counter module\" must have a value of 1 or 2.');\nend\n\nif has_index == 1 "
"&& counter_reset_type ~= 1,\n   error('\"Index input\" must be enabled when u"
"sing a counter reset method involving index pulses.');\nend\n\n\nif input_typ"
"e == 1,\n   if numel(input_vec_a) > 2,\n      error('\"Digital input for sign"
"al [A /A]\" must be a vector of one or two integers.');\n   else\n      input"
"_a = input_vec_a(1);\n      input_na = 0;\n   end\n   if numel(input_vec_b) >"
" 2,\n      error('\"Digital input for signal [B /B]\" must be a vector of one"
" or two integers.');\n   else\n      input_b = input_vec_b(1);\n      input_n"
"b = 0;\n   end\n   if has_index == 2,\n      if numel(input_vec_i) > 2,\n    "
"     error('\"Digital input for signal [I /I]\" must be a vector of one or tw"
"o integers.');\n      else\n         input_i = input_vec_i(1);\n         inpu"
"t_ni = 0;\n      end\n   else\n      input_i = 0;\n      input_ni = 0;\n   en"
"d\nelseif input_type == 2 || input_type == 3,\n   if numel(input_vec_a) ~= 2,"
"\n      error('\"Digital input for signal [A /A]\" must be a vector of two in"
"tegers.');\n   else\n      input_a = input_vec_a(1);\n      input_na = input_"
"vec_a(2);\n   end\n   if numel(input_vec_b) ~= 2,\n      error('\"Digital inp"
"ut for signal [B /B]\" must be a vector of two integers.');\n   else\n      i"
"nput_b = input_vec_b(1);\n      input_nb = input_vec_b(2);\n   end\n   if has"
"_index == 2,\n      if input_type == 2,\n         if numel(input_vec_i) ~= 2,"
"\n            error('\"Digital input for signal [I /I]\" must be a vector of "
"two integers.');\n         else\n            input_i = input_vec_i(1);\n     "
"       input_ni = input_vec_i(2);\n         end\n      else % input type == 3"
"\n         if numel(input_vec_i) > 2,\n            error('\"Digital input for"
" signal [I /I]\" must be a vector of one or two integers.');\n         else\n"
"            input_i = input_vec_i(1);\n            input_ni = 0;\n         en"
"d\n      end\n   else\n      input_i = 0;\n      input_ni = 0;\n   end   \nen"
"d\n"
      Parameter {
        Variable      "instance"
        Prompt        "Counter module"
        Type          FixedText
        PossibleValues {"Counter 1", "Counter 2"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "General"
      }
      Parameter {
        Variable      "max_counter_value"
        Prompt        "Maximum counter value"
        Type          FreeText
        Value         "4095"
        Show          off
        Tunable       off
        TabName       "General"
      }
      Parameter {
        Variable      "counter_mode"
        Prompt        "Counter mode"
        Type          FixedText
        PossibleValues {"Count rising edges of A", "Count both edges of A", "C"
"ount both edges of A and B"}
        Value         "3"
        Show          off
        Tunable       off
        TabName       "General"
      }
      Parameter {
        Variable      "direction"
        Prompt        "Direction (rising edge)"
        Type          FixedText
        PossibleValues {"B follows A", "A follows B"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "General"
      }
      Parameter {
        Variable      "counter_reset_type"
        Prompt        "Counter reset method"
        Type          FixedText
        PossibleValues {"Free running", "Index pulse", "First index pulse only"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "General"
      }
      Parameter {
        Variable      "input_type"
        Prompt        "Input type"
        Type          FixedText
        PossibleValues {"Single ended (all inputs)", "Differential (all inputs"
")", "Differential A and B, single ended I"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "has_index"
        Prompt        "Index input"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "input_vec_a"
        Prompt        "Digital input for signal [A /A]"
        Type          FreeText
        Value         "[0 3]"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "input_vec_b"
        Prompt        "Digital input for signal [B /B]"
        Type          FreeText
        Value         "[1 4]"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Parameter {
        Variable      "input_vec_i"
        Prompt        "Digital input for index signal [I /I]"
        Type          FreeText
        Value         "[2 5]"
        Show          off
        Tunable       off
        TabName       "Input"
      }
      Terminal {
        Type          Output
        Position      [29, -10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 10]
        Direction     right
      }
      Schematic {
        Location      [847, 506; 2189, 703]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Output
          Name          "c"
          Show          on
          Position      [255, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [180, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          base64 "z4k="
          Show          on
          Position      [255, 90]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "s"
          Show          on
          Position      [355, 95]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
          Parameter {
            Variable      "Width"
            Value         "2"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "c"
          DstTerminal   1
        }
      }
    }
  }
}
DemoSignature "oX6iHtzmo6MC/yLZf+r3EXxCtKKGvM1tjsgp16f3YuU="
